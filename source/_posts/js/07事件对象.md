---
title: js获取元素
date: 2020/5/20
updated: 2020/5/21
comments:
tags:
 - js
categories:
 - learningNotes
layout:
permalink:
meta: true
---

### 1. DOM事件流

dom 事件流 三个阶段：

1. JS 代码中只能执行捕获或者冒泡其中的一个阶段。

2. onclick 和 attachEvent（ie） 只能得到冒泡阶段。

3. 捕获阶段 如果addEventListener 第三个参数是 true 那么则处于捕获阶段 

   > document -> html -> body -> father -> son

4. 冒泡阶段 如果addEventListener 第三个参数是 false 或者 省略 那么则处于冒泡阶段  

   > son -> father ->body -> html -> document

### 2. 事件对象	

1. event就是一个事件对象 `div.onclick=function(event){} |div.addEventListenter('click',function(event) {} ) `

2. 事件对象只有有了事件才会存在，是系统给我们自动创建的

3. 事件对象  是 事件的一系列相关数据的集合  跟事件相关的  

   >  （eg：鼠标点击  包含鼠标坐标。。。  if键盘事件  包含按下哪个键）

4. 这个事件对象可以自己命名，比如event->e

5. 兼容性  ie678  `window.event`



### 3. 事件对象常见的属性和方法



| 属性\|方法          | 行为                    | 标准              |
| ------------------- | ----------------------- | ----------------- |
| e.target            | 返回   触发  事件的对象 | 标准              |
| e.srcElement        | 返回   触发  事件的对象 | 非标准  ie678使用 |
| e.type              | 返回时间的类型          |                   |
| e.cancelBubble      | 阻止冒泡                | 非标准  ie678使用 |
| e.stopPropagation() | 阻止冒泡                | 标准              |
| e.reutrnValue       | 阻止默认事件/行为       | 非标准  ie678使用 |
| e.preventDefault()  | 阻止默认事件/行为       | 标准              |



### 4. 事件委托（代理/委派）（冒泡好处）：

原理：不给每个节点单独是设置事件监听器，而是将事件监听器设置再其父结点上，然后利用冒泡原理影响设置每个子节点
	    作用：只操作了一次DOM，提高了程序的性能

事件委托的核心原理：给父节点添加侦听器， 利用事件冒泡影响每一个子节点

> 比如：给ul注册事件，然后利用事件对象的target来找到当前点击的li，以为点击li，事件会冒泡到ul上，ul有注册事件，就会触发监听器

```html
<ul>
	    <li>xxx</li>
	    <li>xxx</li>
	    <li>xxx</li>
	    <li>xxx</li>
	    <li>xxx</li>
</ul>
<script>
var ul=document.querySelector('ul');
ul.addEventListener('click',function(e){
	// e.target 这个可以得到我们点击的对象   点哪个哪个背景变色
	e.target.style.backgroundColor='pink';
})
</script>
```



### 5. 常用的鼠标事件

#### 	5.1 禁用默认选项（了解）

1. 禁止鼠标右键菜单：`contextmenu`主要控制应该何时显示上下菜单，主要用于程序员取消默认的上下文菜单

   ~~~js
   document.addEventListener('contextmenu',function(e){
   	e.prevetDefault();
   })
   ~~~

2. 禁止选中文字：`selectstart` 开始选中

   ~~~js
   document.addEventListener('selectstart',function(e){
   	e.prevetDefault();
   })
   ~~~



#### 5.2 鼠标事件对象

event对象代表时间的状态，跟事件相关的一系列信息的集合。现阶段主要是鼠标事件MouseEvent 何键盘事件KEyboardEvent

+ e.clientX      返回鼠标相对于浏览器窗口可视区的X坐标
+ e.clientY      返回鼠标相对于浏览器窗口可视区的Y坐标
+ e.pageX      返回鼠标相对于文档页面的X坐标      IE9+支持	  
+ e.pageY      返回鼠标相对于文档页面的Y坐标      IE9+支持
+ e.screenX    返回鼠标相对于电脑屏幕的X坐标    
+ e.screenY    返回鼠标相对于电脑屏幕的Y坐标



### 6.常用的键盘事件

#### 6.1键盘事件对象

+ onkeyup      某个键盘按键时被松开时触发	

+ onkeydown 某个键盘按键被按下时触发	

+ onkeypress  某个键盘按键被按下时  触发   但不识别功能键（ctrl   shift）	

  三个事件的顺序：keydowm--keypress--keyup

> 注：keydown和keypress在文本框里的特点：他们两个事件触发时，文字还没有落入文本框中
> 		       keyup事件触发时，文字就已经落入文本框里了



#### 8.2键盘事件对象

+ keyCode   返回该键的ASCLL值
+ key           返回按下的值 

> onkeydown  和 onkeyup不区分字母大小写，onkeypress区分字母大小写
> 在实际开发中，我们更多的使用keydown和keyup 它能识别所有的键（包括包括功能键）	
> keypress不识别功能键，但是keyCode属性区分大小写，返回不同的ASCLL值

