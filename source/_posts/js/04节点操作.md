---
title: js节点操作
date: 2020/5/17
updated: 2020/5/17
comments:
tags:
 - js
categories:
 - learningNotes
layout:
permalink:
meta: true
---

> 为什么学节点操作：
>
> 通常获取元素是
> ​		利用dom提供的方法获取元素：document. getElementById().....   //繁琐逻辑性不强
> ​		利用节点层级关系获取元素：父子兄节点关系   //逻辑性强

### 2.节点概述 

便签、属性、文本、注释等都是节点
	    一般地，节点至少有nodeType（节点类型）、nodeName(节点名称)、nodeValue（节点值）

+ 元素节点   nodeType=1  
+ 属性节点   nodeType=2      
+ 文本节点   nodeType=3（文本节点包含文字、空格、换行等）

 主要操作元素节点

### 3.节点层级    

1. 父级节点：`parentNode`   

   得到的是离元素最近的父级节点（亲爸爸）   找不到就返回为null

```js
<div class="box">
	<sapn class="erweima">×</span>
</div>
var  erweima=document.querySelector('.erweima');
//var box=document.querySelector('.box');
          //=erweima.parentNode;
//console.log(box)=console.log(erweima.parentNode)；
```

2. 子节点：

   + `parentNode.childNodes(标准)`  //返回所有子节点
   + `parentnode.children(非标准) `  //只返回元素节点     是一个只读属性

   兼容性ie9:

   + `parentNode.firstChild | parentNode.lastChild `    //返回第一个/最后一个子节点 
   +  `parentNode.firstElementChild | parentNode.lastElementChild`  //返回第一/最后一个元素节点  
   +   `parentNode.children[0]  | parentNode.children[parentNode.children.length-1]`   //实际开发常用

3. 兄弟节点    

   + `node.nextSibling` 返回下一个兄弟节点   包含所有节点
   + `node.previousSibling`   返回当前元素上一个兄弟节点   包含所有节点  

   兼容性ie9:

   + `node.nextElementSibling`   返回当前元素下一个兄弟元素节点 
   + `node.previousElementSibling`  返回当前元素上一个兄弟元素节点



### 4. 创建节点  

` document.createElement('tagName')   `

方法创建由tagName指定的HTML元素，因为这些元素原先不存在，是根据我们的需求动态生成的，所以我们也称为动态创建元素节点

### 5.添加节点 

+ `node.appendChild(child)`   node父级     child子级   

  将一个节点添加到指定父节点的子节点的子节点列表末尾，类似于css里面的after伪元素

+ node.insertBefore(child,指定元素)

  方法将一个节点添加到父子点的指定子节点前面，类似于css里面的before伪元素




### 6.删除节点   

+ `node.removeChild(child) ` 从dom中删除一个字节点  返回删除的节点

  > 阻止链接跳转需要添加javascript:void(0);或者javascript: ;



### 7.复制节点   

+ `node.cloneNode()` 返回调用改方法节点的一个副本 

  括号参数为空/false  为浅拷贝  只复制节点本身  不克隆里面的子节点（文本）

+ `node.cloneNode(true)` 

  括号为true 深拷贝 复制标签    复制里面的内容



### 8.三种动态创建元素的区别 

​	1. `document.write()`   页面文档流加载完毕，使用  会使文档流重绘

2. `element.innerHTML ` 
3. `document.createElement()`

```js
// 后两个在添加少数时无区别   但多个时
//1. innerHTML:                         3019ms
function fn(){
	var d1=+new Date();
	var str="";
	for(var i=0;i<1000;i++){   //拼接
		document.body.innerHTML+='<div  style="width:100px; height:2px; boder:1px solid blue;">';
	}
	var d2=+new Date();
	
	console.log(d2-d1);
}
fn();

//document.createElement()  20+ms
function fn(){
	var d1=+new Date();

	for(var i=0;i<1000;i++){
		var div=document.createElement('div');
		div.style.width='100px';
		div.style.height='2px';
		div.style.border='1px solid red';
		document.body.appendChild(div);    //创建  增加
	}
	var d2=+new Date();
	
	console.log(d2-d1);
}
fn();
//3. innerHTML用数组   10-ms
function fn(){
	var d1=+new Date();

	var array=[ ];
	for(var i=0;i<1000;i++){   //拼接
		array.push('<div  style="width:100px; height:2px; boder:1px solid blue;">');
	}
	document.body.innerHTML=array.join('');
	var d2=+new Date();
	
	console.log(d2-d1);
}
fn();
```
