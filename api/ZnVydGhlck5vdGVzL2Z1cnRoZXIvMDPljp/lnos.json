{"title":"æ·±å…¥jsåŸå‹ prototypeã€åŸå‹å¯¹è±¡ __proto__ [[prototype]]ã€åŸå‹é“¾","date":"2022-09-16T13:37:00.000Z","date_formatted":{"ll":"Sep 16, 2022","L":"09/16/2022","MM-DD":"09-16"},"link":"furtherNotes/further/03åŸå‹","tags":["JavaScript"],"categories":["furtherNotes"],"updated":"2022-09-17T09:13:35.000Z","content":"<p>åŸå‹ï¼š <code>Prototype</code></p>\n<p>åŸå‹å¯¹è±¡ï¼š<code>__proto__ </code>  <code>[[prototype]]</code></p>\n<p>åŸå‹é“¾ï¼šæ¯ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œé€šè¿‡ <code>__proto__</code> æŒ‡é’ˆ æŒ‡å‘ä¸Šä¸€ä¸ªåŸå‹ï¼Œå¹¶ç»§æ‰¿å…¶æ–¹æ³•å’Œå±æ€§ï¼ŒåŒæ—¶åŸå‹å¯¹è±¡ä¹Ÿå¯èƒ½æ‹¥æœ‰åŸå‹ï¼Œ\t\t\t\t\t\tè¿™æ ·ä¸€å±‚ä¸€å±‚ï¼Œæœ€ç»ˆæŒ‡å‘ <code>null</code>ã€‚</p>\n<p>é€šè¿‡åŸå‹é“¾ä¸€ä¸ªå¯¹è±¡ä¼šæ‹¥æœ‰å®šä¹‰åœ¨å…¶ä»–å¯¹è±¡ä¸­çš„å±æ€§å’Œæ–¹æ³•ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Parent</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">name</span> = <span class=\"string\">&#x27;function parent name&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> p = <span class=\"keyword\">new</span> <span class=\"title class_\">Parent</span>();</span><br><span class=\"line\"><span class=\"keyword\">let</span> c = <span class=\"title class_\">Object</span>.<span class=\"title function_\">create</span>(p);  <span class=\"comment\">// child æ˜¯ä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡ï¼Œæœ‰ä¸€ä¸ªæŒ‡å‘å¯¹è±¡ p çš„æŒ‡é’ˆ __proto__</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">Parent</span> <span class=\"comment\">// function Parent()&#123; this.name = &#x27;...&#x27; &#125;</span></span><br><span class=\"line\"><span class=\"title class_\">Parent</span>.<span class=\"property\">constructor</span>   <span class=\"comment\">// Function() &#123; [native code] &#125; é»˜è®¤å€¼ ä¸å…¶ä»–ä»»ä½•å¼•ç”¨oråŸºæœ¬ç±»å‹åŒ</span></span><br><span class=\"line\"><span class=\"title class_\">Parent</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>  <span class=\"comment\">// Objectç±»å‹ &#123; constructor:f Parent() , __proto__:Object &#125;</span></span><br><span class=\"line\"><span class=\"title class_\">Parent</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">constructor</span> === <span class=\"title class_\">Parent</span>  <span class=\"comment\">// function Parent()&#123; this.name = &#x27;...&#x27; &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">Parent</span>.<span class=\"property\">__proto__</span> === <span class=\"title class_\">Function</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span> <span class=\"comment\">// f() &#123; [native code] &#125;  </span></span><br><span class=\"line\"><span class=\"title class_\">Object</span>.<span class=\"title function_\">getPrototypeOf</span>(<span class=\"title class_\">Parent</span>) <span class=\"comment\">// f() &#123; [native code] &#125; é€šå¸¸ç”¨è¿™ä¸ª function get __proto__ === [[prototype]]</span></span><br><span class=\"line\"><span class=\"title class_\">Parent</span>.<span class=\"property\">__proto__</span>.<span class=\"property\">constructor</span> === <span class=\"title class_\">Parent</span>.<span class=\"property\">constructor</span>  <span class=\"comment\">// Function()&#123; [native code] &#125; </span></span><br><span class=\"line\"><span class=\"title class_\">Parent</span>.<span class=\"property\">__proto__</span> != <span class=\"title class_\">Parent</span>.<span class=\"property\">__proto__</span>.<span class=\"property\">constructor</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// -------------------------------------------------------------------------</span></span><br><span class=\"line\"></span><br><span class=\"line\">p <span class=\"comment\">// Parent &#123;name: &quot;...&quot;, __proto__: &#123;&#125; &#125;</span></span><br><span class=\"line\">p.<span class=\"property\">constructor</span> <span class=\"comment\">// f Parent() &#123; this.name = &#x27;...&#x27; &#125;  æ‰¾çš„æ˜¯ __proto__ çš„</span></span><br><span class=\"line\">p.<span class=\"property\">__proto__</span>.<span class=\"property\">contructor</span> === <span class=\"title class_\">Parent</span> === p.<span class=\"property\">constructor</span> <span class=\"comment\">// f Parent() &#123; this.name = &#x27;...&#x27; &#125;</span></span><br><span class=\"line\">p.<span class=\"property\">__proto__</span> === <span class=\"title class_\">Parent</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// -------------------------------------------------------------------------</span></span><br><span class=\"line\"></span><br><span class=\"line\">c <span class=\"comment\">// Parent&#123; __proto__: Parent&#123; name:&#x27;...&#x27;, __proto__: &#123;&#125; &#125; &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// c == Parent &#123;__proto__: p&#125;</span></span><br><span class=\"line\">c.<span class=\"property\">constructor</span> <span class=\"comment\">// f Parent() &#123; this.name = &#x27;...&#x27; &#125;</span></span><br><span class=\"line\">c != p != <span class=\"title class_\">Parent</span></span><br><span class=\"line\">c.<span class=\"property\">__proto__</span> === p</span><br><span class=\"line\">c.<span class=\"property\">__proto__</span>.<span class=\"property\">__proto__</span> === p.<span class=\"property\">__proto__</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">Parent</span>.<span class=\"property\">__proto__</span> === <span class=\"title class_\">Function</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span> </span><br><span class=\"line\"><span class=\"title class_\">Function</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">__proto__</span> === <span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">p.<span class=\"property\">__proto__</span> === <span class=\"title class_\">Parent</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span></span><br><span class=\"line\"><span class=\"title class_\">Parent</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">__proto__</span> === <span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span></span><br><span class=\"line\"><span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">__proto__</span> === <span class=\"literal\">null</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">Parent</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span> = &#123;</span><br><span class=\"line\">    <span class=\"attr\">constructor</span>: <span class=\"title class_\">Parent</span>()&#123;</span><br><span class=\"line\">    \t<span class=\"variable language_\">arguments</span>, caller, length, <span class=\"attr\">name</span>: <span class=\"string\">&quot;Parent&quot;</span>,</span><br><span class=\"line\">    \tprototype : &#123;...&#125;, <span class=\"comment\">// è¿™é‡Œä¸€æ•´ä¸ª å¾ªç¯å¼•ç”¨ç±»ä¼¼</span></span><br><span class=\"line\">\t\t__proto__ : <span class=\"title function_\">f</span>(<span class=\"params\"></span>)&#123;...&#125;, <span class=\"comment\">// ä¸€äº›api apply, constructor, toString, symbol...</span></span><br><span class=\"line\">        [[<span class=\"title class_\">FunctionLocation</span>]]: ...,</span><br><span class=\"line\">        [[<span class=\"title class_\">Scopes</span>]] : <span class=\"title class_\">Scopes</span>[ <span class=\"title class_\">Global</span>: &#123;&#125; ]</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">        </span><br><span class=\"line\">    <span class=\"attr\">__proto__</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">constructor</span>: f <span class=\"title class_\">Object</span>()&#123; <span class=\"comment\">// Object æ„é€ å‡½æ•°</span></span><br><span class=\"line\">            <span class=\"attr\">arguments</span>:&#123;&#125;, <span class=\"title function_\">assign</span>(), <span class=\"attr\">caller</span>:&#123;&#125;, <span class=\"title function_\">create</span>(), <span class=\"title function_\">defineProperties</span>(), <span class=\"title function_\">defineProperty</span>(), <span class=\"title function_\">entries</span>(), <span class=\"title function_\">freeze</span>(), <span class=\"title function_\">formEntries</span>(), <span class=\"title function_\">getOwnPropertyDescriptor</span>()...</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"title function_\">hasOwnProperty</span>(), </span><br><span class=\"line\">        <span class=\"title function_\">isPrototypeOf</span>(), </span><br><span class=\"line\">        <span class=\"title function_\">propertyIsEnumerable</span>(),</span><br><span class=\"line\">        <span class=\"title function_\">toLocaleString</span>(),</span><br><span class=\"line\">        <span class=\"title function_\">toString</span>(), <span class=\"title function_\">valueOf</span>()...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>Symbol ä½œä¸ºæ„é€ å‡½æ•°æ¥è¯´ä¸å®Œæ•´ï¼Œå› ä¸ºä¸æ”¯æŒ <code>new Symbol()</code>ï¼Œä½†å…¶åŸå‹ä¸Šæœ‰ <code>constructor</code> å±æ€§ <code>===  Symbol.prototype.constructor</code></p>\n</li>\n<li>\n<p>å¼•ç”¨ç±»å‹ <code>constructor</code> å±æ€§æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œä½†å¯¹äºåŸºæœ¬ç±»å‹æ˜¯åªè¯»çš„ï¼Œ<code>null undefined</code> æ²¡æœ‰ <code>constructor</code></p>\n</li>\n<li>\n<p><code>__proto__</code>  æ˜¯æ¯ä¸ªå®ä¾‹éƒ½æœ‰çš„å±æ€§ï¼Œ<code>prototype</code> æ˜¯æ„é€ å‡½æ•°çš„å±æ€§ï¼Œåœ¨å®ä¾‹ä¸Šä¸å­˜åœ¨ï¼Œä½†æ˜¯<code>p.__proto__</code>  <code>Parent.prototype</code> æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡</p>\n</li>\n<li>\n<p><code>__proto__</code> åœ¨ <code>es6</code> è¢«æ ‡å‡†åŒ–ï¼Œä½†æ€§èƒ½é—®é¢˜å¹¶ä¸æ¨èä½¿ç”¨ï¼Œæ¨èä½¿ç”¨ <code>Object.getPrototypeOf()</code></p>\n</li>\n<li>\n<p>instanceof åŸç†ï¼šä¸€å±‚å±‚æŸ¥æ‰¾ <code>__proto__</code>ï¼Œå¦‚æœå’Œ <code>constructor.prototype</code> ç›¸ç­‰åˆ™è¿”å› <code>true</code></p>\n</li>\n</ul>\n","prev":{"title":"ä¿å§†çº§ç†è§£jså„ç§ç»§æ‰¿æ–¹æ¡ˆ","link":"furtherNotes/further/04ç»§æ‰¿"},"next":{"title":"é¡¹ç›®æ€§èƒ½ä¼˜åŒ–ä¹‹ç¼“å­˜å’Œæ‡’åŠ è½½","link":"workNotes/work/12 é¡µé¢è·³è½¬ç¼“å­˜å’Œå›¾ç‰‡æ‡’é¢„åŠ è½½"},"plink":"https://shylees.github.io/furtherNotes/further/03åŸå‹/","copyright":{"custom":"ä¸è®¸è½¬è½½ğŸ˜¡ï¼ï¼ï¼"},"reading_time":"552 words in 3 min"}