{"title":"æ»šè½®äº‹ä»¶","date":"2021-11-12T16:00:00.000Z","date_formatted":{"ll":"Nov 13, 2021","L":"11/13/2021","MM-DD":"11-13"},"link":"furtherNotes/further/04 æ»šè½®äº‹ä»¶","tags":["JavaScript"],"categories":["furtherNotes"],"updated":"2021-11-12T16:00:00.000Z","content":"<blockquote>\n<p>å‚è€ƒé“¾æ¥ï¼š</p>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/WheelEvent\">https://developer.mozilla.org/zh-CN/docs/Web/API/WheelEvent</a></p>\n<p><a href=\"https://juejin.cn/post/6974018969690734628\">https://juejin.cn/post/6974018969690734628</a></p>\n<p><a href=\"https://blog.csdn.net/TXW6666/article/details/106456045\">https://blog.csdn.net/TXW6666/article/details/106456045</a></p>\n<p><a href=\"https://blog.csdn.net/lijingshan34/article/details/88350456\">https://blog.csdn.net/lijingshan34/article/details/88350456</a></p>\n</blockquote>\n<h2 id=\"æ»šè½®äº‹ä»¶-wheelevent\">æ»šè½®äº‹ä»¶ wheelEvent<a title=\"#æ»šè½®äº‹ä»¶-wheelevent\" href=\"#æ»šè½®äº‹ä»¶-wheelevent\"></a></h2>\n<h3 id=\"1.-ä»‹ç»æ»šè½®äº‹ä»¶\">1. ä»‹ç»æ»šè½®äº‹ä»¶<a title=\"#1.-ä»‹ç»æ»šè½®äº‹ä»¶\" href=\"#1.-ä»‹ç»æ»šè½®äº‹ä»¶\"></a></h3>\n<p>wheelEvent æ¥å£è¡¨ç¤ºç”¨æˆ·æ»šåŠ¨é¼ æ ‡æ»šè½® æˆ– ç±»ä¼¼è¾“å…¥è®¾å¤‡æ—¶è§¦å‘çš„äº‹ä»¶ã€‚</p>\n<ul>\n<li>**è¯¥äº‹ä»¶ä¸ºæ ‡å‡†è§„å®šçš„æ»šè½®äº‹ä»¶æ¥å£ã€‚**æ—©æœŸçš„æµè§ˆå™¨å®ç°è¿‡<a href=\"https://developer.mozilla.org/zh-CN/docs/conflicting/Web/API/WheelEvent\" target=\"_blank\"><code>MouseWheelEvent</code></a>å’Œ<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/MouseScrollEvent\" target=\"_blank\"><code>MouseScrollEvent</code></a>ä¸¤ç§æ»šè½®äº‹ä»¶æ¥å£ï¼Œä½†è¿™ä¸¤ç§æ¥å£çš†éæ ‡å‡†ï¼ŒåŠ ä¹‹å„æµè§ˆå™¨é—´å¯¹å…¶å…¼å®¹æ€§æå·®ã€‚</li>\n</ul>\n<blockquote>\n<p>onmousewheelï¼ˆfirefoxä¸æ”¯æŒï¼‰  DOMMouseScrollï¼ˆåªæœ‰firefoxæ”¯æŒï¼‰</p>\n<p>å› è€Œå¼€å‘è€…åº”ä½¿ç”¨è¯¥æ ‡å‡†äº‹ä»¶æ¥å£å–ä»£è¿™ä¸¤ä¸ªéæ ‡å‡†æ¥å£ã€‚</p>\n</blockquote>\n<ul>\n<li>\n<p><strong>ä¸è¦æ··æ·† <code>wheel</code> äº‹ä»¶å’Œ <code>scroll</code> äº‹ä»¶ï¼š</strong><code>wheel</code> äº‹ä»¶çš„é»˜è®¤åŠ¨ä½œå–å†³äºæµè§ˆå™¨å®ç°ã€‚</p>\n<p>å› æ­¤ <code>wheel</code> äº‹ä»¶ä¸ä¸€å®šä¼šè§¦å‘ <code>scroll (en-US)</code> äº‹ä»¶ã€‚å³ä¾¿æ»šè½®äº‹ä»¶å¼•å‘äº†æ–‡æ¡£å†…å®¹çš„æ»šåŠ¨è¡Œä¸ºï¼Œä¹Ÿä¸è¡¨ç¤º <code>wheel</code> äº‹ä»¶ä¸­çš„ <code>delta*</code> å€¼æ°å¥½åæ˜ æ–‡æ¡£å†…å®¹çš„æ»šåŠ¨æ–¹å‘ã€‚å› æ­¤ï¼Œä¸è¦ä¾èµ– <code>delta*</code> å±æ€§è·çŸ¥æ–‡æ¡£å†…å®¹çš„æ»šåŠ¨æ–¹å‘ã€‚å¯åœ¨æ–‡æ¡£å†…å®¹æ»šåŠ¨äº‹ä»¶ï¼ˆ<code>scroll</code>ï¼‰ä¸­ç›‘è§†targetçš„<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Element/scrollLeft\" target=\"_blank\"><code>scrollLeft</code></a>å’Œ<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Element/scrollTop\" target=\"_blank\"><code>scrollTop</code></a>çš„å˜åŒ–ä»¥æ¨æ–­æ»šåŠ¨æ–¹å‘ã€‚</p>\n</li>\n</ul>\n<h3 id=\"2.-wheel-çš„äº‹ä»¶å¯¹è±¡çš„å±æ€§\">2. wheel çš„äº‹ä»¶å¯¹è±¡çš„å±æ€§<a title=\"#2.-wheel-çš„äº‹ä»¶å¯¹è±¡çš„å±æ€§\" href=\"#2.-wheel-çš„äº‹ä»¶å¯¹è±¡çš„å±æ€§\"></a></h3>\n<h4 id=\"2.1-è§¦å‘äº‹ä»¶\">2.1 è§¦å‘äº‹ä»¶<a title=\"#2.1-è§¦å‘äº‹ä»¶\" href=\"#2.1-è§¦å‘äº‹ä»¶\"></a></h4>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">document</span>.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;wheel&#x27;</span>,(e)&#123;</span><br><span class=\"line\">    \t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(e)                          </span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;)()</span><br></pre></td></tr></table></figure>\n<h4 id=\"2.2-&lt;font-color=&quot;red&quot;&gt;äº‹ä»¶å¯¹è±¡å¯¹æ¯”&lt;/font&gt;\">2.2 <font color=\"red\">äº‹ä»¶å¯¹è±¡å¯¹æ¯”</font><a title=\"#2.2-&lt;font-color=&quot;red&quot;&gt;äº‹ä»¶å¯¹è±¡å¯¹æ¯”&lt;/font&gt;\" href=\"#2.2-&lt;font-color=&quot;red&quot;&gt;äº‹ä»¶å¯¹è±¡å¯¹æ¯”&lt;/font&gt;\"></a></h4>\n<p>åœ¨è°·æ­Œ(å·¦)å’Œç«ç‹æ‰“å°çš„ç»“æœä¸ºï¼š</p>\n<ul>\n<li>\n<p><strong>é¼ æ ‡æ»šè½®äº‹ä»¶å¯¹è±¡</strong></p>\n<ol>\n<li>\n<p><strong>é¡µé¢å¾€ä¸‹( æ»šè½®å¾€ä¸‹æ»š)</strong></p>\n<img src='./img/wheel down1.png' style=\"zoom:67%;float:left\" >\n<img src='./img/wheel down2.jpg' style=\"zoom:70%;float:left\" >\n</li>\n<li>\n<p><strong>é¡µé¢å¾€ä¸Š( æ»šè½®å¾€ä¸‹æ»š )</strong></p>\n<img src='./img/wheel up1.jpg' style=\"zoom:70%;float:left\" >\n<img src='./img/wheel up2.jpg' style=\"zoom:70%;float:left\" >\n</li>\n</ol>\n</li>\n<li>\n<p><strong>è§¦æ‘¸æ¿æ»‘åŠ¨äº‹ä»¶å¯¹è±¡</strong></p>\n<ol>\n<li>\n<p><strong>é¡µé¢å¾€ä¸‹( è§¦æ‘¸æ¿å‘ä¸Šæ»‘åŠ¨ )</strong></p>\n<img src=\"./img/chumoban_down1.jpg\" style=\"zoom:70%; float:left;\" >\n<img src=\"./img/chumoban_down2.jpg\" style=\"zoom:70%; float:left\" >\n</li>\n<li>\n<p><strong>é¡µé¢å¾€ä¸Š( è§¦æ‘¸æ¿å¾€ä¸‹æ»‘åŠ¨ )</strong></p>\n<img src=\"./img/chumoban_up1.jpg\" style=\"zoom:70%; float:left;\" >\n<img src=\"./img/chumoban_up2.jpg\" style=\"zoom:70%; float:left;\" >\n</li>\n</ol>\n</li>\n</ul>\n<p>æ€»ç»“ï¼š<strong>deltalY</strong>ï¼šé¡µé¢å‘ä¸‹ï¼š&gt; 0 ï¼›é¡µé¢å‘ä¸Šï¼š&lt; 0ï¼›</p>\n<p>â€‹           <strong>wheelDelta | wheelDeltaY</strong>ï¼šå‘ä¸‹ : &lt; 0ï¼›å‘ä¸Šï¼š&gt;0</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">window</span>.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&quot;wheel&quot;</span>, <span class=\"keyword\">function</span> (<span class=\"params\">e</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> evt = e || <span class=\"variable language_\">window</span>.<span class=\"property\">event</span>;   <span class=\"comment\">//åé¢ä¸ºäº†å…¼å®¹ ie</span></span><br><span class=\"line\">    evt.<span class=\"title function_\">preventDefault</span>();          <span class=\"comment\">//é˜»æ­¢æµè§ˆå™¨é»˜è®¤è¡Œä¸ºu</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (evt.<span class=\"property\">deltaY</span> &gt; <span class=\"number\">0</span> || evt.<span class=\"property\">wheelDelta</span> &lt; <span class=\"number\">0</span>) &#123; ... &#125; </span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (evt.<span class=\"property\">deltaY</span> &lt; <span class=\"number\">0</span> || evt.<span class=\"property\">wheelDelta</span> &gt; <span class=\"number\">0</span>) &#123; ... &#125;</span><br><span class=\"line\">  &#125;,&#123; <span class=\"attr\">passive</span>:<span class=\"literal\">false</span> &#125;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"3.-passive:-false\">3. passive: false<a title=\"#3.-passive:-false\" href=\"#3.-passive:-false\"></a></h3>\n<p><strong>!<code>&#123; passive:false &#125;</code>è¦åŠ ä¸Š</strong>ï¼Œä¸ç„¶æ»šè½®æ»šåŠ¨é¡µé¢çš„æ—¶å€™ä¼šæŠ¥ï¼š<code>Unable to preventDefault inside passive event listener</code></p>\n<p>**åŸå› ï¼š**Chorme56+å¼€å§‹ä¸ºäº†è®©é¡µé¢æ»šåŠ¨å˜å¾—æ›´ä¸ºæµç•…ï¼Œåœ¨ windowã€document å’Œ body ä¸Šæ³¨å†Œçš„ touchstartå’Œ touchmove äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œä¼šé»˜è®¤ä¸ºæ˜¯ passive: trueã€‚</p>\n<blockquote>\n<p>ä¹‹å‰ï¼šå½“æµè§ˆå™¨é¦–å…ˆå¯¹é»˜è®¤çš„äº‹ä»¶è¿›è¡Œå“åº”çš„æ—¶å€™ï¼Œè¦æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦è¿›è¡Œäº†é»˜è®¤äº‹ä»¶çš„å–æ¶ˆã€‚è¿™æ ·å°±åœ¨å“åº”æ»‘åŠ¨æ“ä½œä¹‹å‰æœ‰é‚£ä¹ˆä¸€ä¸ä¸çš„è€½è¯¯æ—¶é—´ã€‚</p>\n<p>ç°åœ¨ï¼šgoogleå°±å†³å®šé»˜è®¤å–æ¶ˆäº†å¯¹è¿™ä¸ªäº‹ä»¶çš„æ£€æŸ¥ï¼Œé»˜è®¤æ—¶é—´å°±å–æ¶ˆäº†ã€‚ç›´æ¥æ‰§è¡Œæ»‘åŠ¨æ“ä½œã€‚è¿™æ ·å°±æ›´åŠ çš„é¡ºæ»‘äº†ã€‚</p>\n</blockquote>\n<p>æµè§ˆå™¨å¿½ç•¥é»˜è®¤äº‹ä»¶çš„preventDefault(), è¦æ˜¯æ‰‹åŠ¨é˜»æ­¢ä¼šå¼¹å‡ºä¸€ä¸ªè­¦å‘Š, å‘Šè¯‰ä½ é˜»æ­¢ä¸äº†!!!</p>\n<p><strong>è§£å†³ï¼š</strong></p>\n<ol>\n<li>\n<p><code>window.addEventListener('touchmove', func, &#123; passive: false &#125;)</code></p>\n</li>\n<li>\n<p><code>* &#123; touch-action:none; &#125;</code></p>\n<blockquote>\n<p>touch-actionæ˜¯cssä¸­çš„ä¸€ä¸ªå±æ€§ï¼Œç”¨äºè®¾ç½®è§¦æ‘¸å±ç”¨æˆ·å¦‚ä½•æ“çºµå…ƒç´ çš„åŒºåŸŸï¼ˆä¾‹å¦‚æµè§ˆå™¨å†…ç½®çš„ç¼©æ”¾åŠŸèƒ½ï¼‰</p>\n</blockquote>\n</li>\n</ol>\n<h3 id=\"4.-é¡¹ç›®ä¸è¶³\">4. é¡¹ç›®ä¸è¶³<a title=\"#4.-é¡¹ç›®ä¸è¶³\" href=\"#4.-é¡¹ç›®ä¸è¶³\"></a></h3>\n<p>åœ¨é¡¹ç›®å®ç°çš„æ—¶å€™ï¼Œæ²¡åŠæ³•å…¼å®¹è§¦æ‘¸æ¿æ»‘åŠ¨ï¼Œå› ä¸ºè§¦æ‘¸æ¿æ¯æ¬¡æ»‘åŠ¨çš„æ—¶å€™ä¼šè§¦å‘å¤šæ¬¡æ»šè½®äº‹ä»¶ï¼Œå°±ä¼šä½¿å¾—é¡µé¢ä»ç¬¬ä¸€ä¸ªæ¿å—æ»‘å€’é¡µé¢åº•éƒ¨ã€‚</p>\n<p>è§£å†³æ–¹æ¡ˆï¼šèŠ‚æµé˜²æŠ–ï¼Ÿ</p>\n<p><strong>Aï¼š</strong></p>\n<ol>\n<li>\n<p>èŠ‚æµï¼Œé¡µé¢ä¼šæœ‰ä¸€ç‚¹å»¶è¿Ÿï¼Œä¸å¤ªå‹å¥½</p>\n</li>\n<li>\n<p>é˜²æŠ–ï¼Œé¼ æ ‡æ»šåŠ¨äº‹ä»¶ä¸ä¼šå¤šæ¬¡è§¦å‘ï¼Œè¿˜æ˜¯å¤„ç†å¾—è›®å¥½çš„ï¼Œä½†æ˜¯è§¦æ‘¸æ¿äº‹ä»¶æ²¡åŠæ³•åƒæ»šè½®äº‹ä»¶é‚£æ ·ä½¿ç”¨ï¼Œå¥½åƒå¹¶æ²¡æœ‰é˜»æ­¢åˆ°é»˜è®¤äº‹ä»¶ã€‚</p>\n</li>\n</ol>\n","prev":{"title":"å…³äºç½‘ç»œæ”»å‡»é‚£äº›äº‹å„¿~","link":"furtherNotes/further/08 å‰ç«¯å®‰å…¨"},"next":{"title":"èŠ‚æµthrottleã€é˜²æŠ–debounce","link":"furtherNotes/further/05 èŠ‚æµé˜²æŠ–"},"plink":"https://shylees.github.io/furtherNotes/further/04 æ»šè½®äº‹ä»¶/","toc":[{"id":"æ»šè½®äº‹ä»¶-wheelevent","title":"æ»šè½®äº‹ä»¶ wheelEvent","index":"1","children":[{"id":"1.-ä»‹ç»æ»šè½®äº‹ä»¶","title":"1. ä»‹ç»æ»šè½®äº‹ä»¶","index":"1.1"},{"id":"2.-wheel-çš„äº‹ä»¶å¯¹è±¡çš„å±æ€§","title":"2. wheel çš„äº‹ä»¶å¯¹è±¡çš„å±æ€§","index":"1.2"},{"id":"3.-passive:-false","title":"3. passive: false","index":"1.3"},{"id":"4.-é¡¹ç›®ä¸è¶³","title":"4. é¡¹ç›®ä¸è¶³","index":"1.4"}]}],"copyright":{"custom":"ä¸è®¸è½¬è½½ğŸ˜¡ï¼ï¼ï¼"},"reading_time":"914 words in 5 min"}