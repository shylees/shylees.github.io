{"title":"æ„å»º webpack çŸ¥è¯†ä½“ç³» - å­—èŠ‚é’è®­è¥","date":"2022-01-24T16:00:00.000Z","date_formatted":{"ll":"Jan 25, 2022","L":"01/25/2022","MM-DD":"01-25"},"link":"learningNotes/é’è®­è¥/12 ææ–‡æ° webpack","tags":["webpack","é’è®­è¥"],"categories":["learningNotes"],"updated":"2022-01-24T16:00:00.000Z","content":"<h1 id=\"æ„å»º-webpack-çŸ¥è¯†ä½“ç³»\">æ„å»º webpack çŸ¥è¯†ä½“ç³»<a title=\"#æ„å»º-webpack-çŸ¥è¯†ä½“ç³»\" href=\"#æ„å»º-webpack-çŸ¥è¯†ä½“ç³»\"></a></h1>\n<p>çŸ¥è¯†ä½“ç³»ï¼š<a href=\"https://gitmind.cn/app/doc/fac1c196e29b8f9052239f16cff7d4c7\">https://gitmind.cn/app/doc/fac1c196e29b8f9052239f16cff7d4c7</a></p>\n<h2 id=\"1.-ä»€ä¹ˆæ˜¯webpack\">1. ä»€ä¹ˆæ˜¯webpack<a title=\"#1.-ä»€ä¹ˆæ˜¯webpack\" href=\"#1.-ä»€ä¹ˆæ˜¯webpack\"></a></h2>\n<p>æœ¬è´¨ä¸Šæ˜¯ä¸€ç§å‰ç«¯èµ„æºç¼–è¯‘ã€æ‰“åŒ…å·¥å…·</p>\n<ul>\n<li>å¤šä»½èµ„æºæ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªBundle</li>\n<li>æ”¯æŒ Babelã€Eslintã€TSã€CoffeScriptã€Lessã€Sass</li>\n<li>æ”¯æŒæ¨¡å—åŒ–å¤„ç† cssã€å›¾ç‰‡ç­‰èµ„æºæ–‡ä»¶</li>\n<li>æ”¯æŒ HMR + å¼€å‘æœåŠ¡å™¨</li>\n<li>æ”¯æŒæŒç»­ç›‘å¬ã€æŒç»­æ„å»º</li>\n<li>æ”¯æŒä»£ç åˆ†ç¦»</li>\n<li>æ”¯æŒ Tree-shaking</li>\n<li>æ”¯æŒ Sourcemap</li>\n<li>â€¦</li>\n</ul>\n<h2 id=\"2.-ä½¿ç”¨-webpack\">2. ä½¿ç”¨ webpack<a title=\"#2.-ä½¿ç”¨-webpack\" href=\"#2.-ä½¿ç”¨-webpack\"></a></h2>\n<h3 id=\"1.-ç¤ºä¾‹\">1. ç¤ºä¾‹<a title=\"#1.-ç¤ºä¾‹\" href=\"#1.-ç¤ºä¾‹\"></a></h3>\n<ol>\n<li>\n<p>å®‰è£…</p>\n<p><code>npm i -D webpack webpack-cli</code></p>\n</li>\n<li>\n<p>ç¼–è¾‘é…ç½®æ–‡ä»¶</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">    <span class=\"attr\">entry</span>:<span class=\"string\">&quot;main.js&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">output</span>:&#123;</span><br><span class=\"line\">        <span class=\"attr\">filename</span>:<span class=\"string\">&quot;[name].js&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">path</span>:path.<span class=\"title function_\">join</span>(__dirname,<span class=\"string\">&quot;./dist&quot;</span>),</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">module</span>:&#123;</span><br><span class=\"line\">        <span class=\"attr\">rules</span>:[&#123;</span><br><span class=\"line\">            <span class=\"attr\">test</span>:<span class=\"regexp\">/\\.less$/i</span>,</span><br><span class=\"line\">            <span class=\"attr\">use</span>:[<span class=\"string\">&#x27;style-loader&#x27;</span>,<span class=\"string\">&#x27;css-loader&#x27;</span>,<span class=\"string\">&#x27;less-loader&#x27;</span>]</span><br><span class=\"line\">        &#125;]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>æ‰§è¡Œç¼–è¯‘å‘½ä»¤</p>\n<p><code>npx webpack</code></p>\n</li>\n</ol>\n<h3 id=\"2.-æ ¸å¿ƒæµç¨‹-â€”-æç®€åŒ–ç‰ˆ\">2. æ ¸å¿ƒæµç¨‹ â€” æç®€åŒ–ç‰ˆ<a title=\"#2.-æ ¸å¿ƒæµç¨‹-â€”-æç®€åŒ–ç‰ˆ\" href=\"#2.-æ ¸å¿ƒæµç¨‹-â€”-æç®€åŒ–ç‰ˆ\"></a></h3>\n<ol>\n<li>å…¥å£å¤„ç† ï¼š ä»entryæ–‡ä»¶å¼€å§‹å¯åŠ¨ç¼–è¯‘æµç¨‹</li>\n<li>ä¾èµ–è§£æ ï¼šæ ¹æ®requireã€importç­‰æ‰¾åˆ°ä¾èµ–èµ„æº</li>\n<li>èµ„æºè§£æ ï¼šæ ¹æ®moduleé…ç½®ï¼Œè°ƒç”¨èµ„æºè½¬ç§»å™¨ï¼Œå°†cssç­‰éæ ‡å‡†jsèµ„æºè½¬è¯‘ä¸º js å†…å®¹</li>\n<li>èµ„æºåˆå¹¶æ‰“åŒ… ï¼šå°†è½¬è¯‘åçš„èµ„æºå†…å®¹åˆå¹¶æ‰“åŒ…ä¸ºå¯ç›´æ¥åœ¨æµè§ˆå™¨è¿è¡Œçš„js</li>\n</ol>\n<h3 id=\"3.-é…ç½®é¡¹æ¦‚è§ˆ\">3. é…ç½®é¡¹æ¦‚è§ˆ<a title=\"#3.-é…ç½®é¡¹æ¦‚è§ˆ\" href=\"#3.-é…ç½®é¡¹æ¦‚è§ˆ\"></a></h3>\n<p>ä½¿ç”¨ webpack çš„æ–¹æ³•ï¼š<strong>åŸºæœ¬å›´ç»• â€œé…ç½®â€å±•å¼€ï¼Œå¯åˆ†ä¸º</strong></p>\n<ul>\n<li>æµç¨‹ç±»ï¼šä½œç”¨äºæµç¨‹ä¸­æŸä¸ª or è‹¥å¹²ä¸ªç¯èŠ‚ï¼Œç›´æ¥å½±å“æ‰“åŒ…æ•ˆæœçš„é…ç½®é¡¹\n<ul>\n<li>è¾“å…¥ï¼šentryã€context</li>\n<li>æ¨¡å—è§£æï¼šresolveã€externals</li>\n<li>æ¨¡å—è½¬è¯‘ï¼šmodule</li>\n<li>åå¤„ç†ï¼šoptimizationã€modeã€target</li>\n</ul>\n</li>\n<li>å·¥å…·ç±»ï¼šä¸»æµç¨‹ä¹‹å¤–ï¼Œæä¾›æ›´å¤šå·¥ç¨‹åŒ–èƒ½åŠ›çš„é…ç½®é¡¹\n<ul>\n<li>å¼€å‘æ•ˆç‡ç±»ï¼šwatchã€devtoolã€devServer</li>\n<li>æ€§èƒ½ä¼˜åŒ–ç±»ï¼šcacheã€performance</li>\n<li>æ—¥å¿—ç±»ï¼šstatsã€infrastructureLogging</li>\n<li>å…¶ä»–ï¼šamdã€bail</li>\n</ul>\n</li>\n</ul>\n<p>é…ç½®é¡¹çš„ä½¿ç”¨é¢‘ç‡ï¼š</p>\n<ul>\n<li>entry/output</li>\n<li>module/plugins</li>\n<li>mode</li>\n<li>watch/devServer/devtools</li>\n</ul>\n<h4 id=\"3.1-å¤„ç†-css-â€“-style-loader,css-loader\">3.1 å¤„ç† css â€“ style-loader,css-loader<a title=\"#3.1-å¤„ç†-css-â€“-style-loader,css-loader\" href=\"#3.1-å¤„ç†-css-â€“-style-loader,css-loader\"></a></h4>\n<ol>\n<li>å®‰è£…loader</li>\n<li>ç¼–è¾‘é…ç½®é¡¹</li>\n</ol>\n<blockquote>\n<p>loader æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨åˆ° css-loaderã€style-loaderï¼Ÿ</p>\n<p>A: å› ä¸º webpack åªè®¤è¯† jsï¼Œä¸ºäº†å¤„ç†éæ ‡å‡†jsèµ„æºï¼Œè®¾è®¡å‡ºçš„èµ„æºç¿»è¯‘æ¨¡å— â€” loaderï¼Œå°†èµ„æºç¿»è¯‘ä¸ºæ ‡å‡† js</p>\n<p>ä¸åœ¨ html æ–‡ä»¶ä¸­ç»´æŠ¤ css ç›¸æ¯”ï¼Œè¿™ç§æ–¹å¼ä¼šæœ‰ä»€ä¹ˆä¼˜åŠ£ï¼Ÿ</p>\n<p>å¦‚ä½•åœ¨webpackæ¥å…¥lessã€sassã€stylusï¼Ÿ</p>\n</blockquote>\n<h4 id=\"3.2-å¤„ç†-js-â€“-æ¥å…¥-babel\">3.2 å¤„ç† js â€“ æ¥å…¥ Babel<a title=\"#3.2-å¤„ç†-js-â€“-æ¥å…¥-babel\" href=\"#3.2-å¤„ç†-js-â€“-æ¥å…¥-babel\"></a></h4>\n<ol>\n<li>å®‰è£…ä¾èµ– <code>npm i -D @babel/core @babel/preset-env babel-loader</code></li>\n<li>å£°æ˜ output</li>\n<li>æ‰§è¡Œ npx webpack</li>\n</ol>\n<blockquote>\n<p>Babel æœ‰ä»€ä¹ˆåŠŸèƒ½</p>\n<p>Babel ä¸ webpack åˆ†åˆ«è§£å†³äº†ä»€ä¹ˆé—®é¢˜</p>\n</blockquote>\n<h4 id=\"3.3-ç”Ÿæˆ-html\">3.3 ç”Ÿæˆ HTML<a title=\"#3.3-ç”Ÿæˆ-html\" href=\"#3.3-ç”Ÿæˆ-html\"></a></h4>\n<ol>\n<li>å®‰è£…ä¾èµ– <code>npm i -D html-webpack-plugin</code></li>\n<li>å£°æ˜äº§ç‰©å‡ºå£ output</li>\n<li>ä½¿ç”¨æ’ä»¶ <code>plugins:[new HtmlWebpackPlugin]</code></li>\n<li>æ‰§è¡Œ <code>npx webpack</code></li>\n</ol>\n<blockquote>\n<p>ç›¸æ¯”äºæ‰‹å·¥ç»´æŠ¤çš„ HTML å†…å®¹ï¼Œè¿™ç§è‡ªåŠ¨ç”Ÿæˆçš„æ–¹å¼æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ</p>\n</blockquote>\n<h3 id=\"4.-å·¥å…·çº¿\">4. å·¥å…·çº¿<a title=\"#4.-å·¥å…·çº¿\" href=\"#4.-å·¥å…·çº¿\"></a></h3>\n<h4 id=\"4.1-hmr-æµè§ˆå™¨çƒ­æ›¿æ¢\">4.1 HMR æµè§ˆå™¨çƒ­æ›¿æ¢<a title=\"#4.1-hmr-æµè§ˆå™¨çƒ­æ›¿æ¢\" href=\"#4.1-hmr-æµè§ˆå™¨çƒ­æ›¿æ¢\"></a></h4>\n<ol>\n<li>æ›´æ”¹é…ç½®é¡¹ devServer: { hot: true, open: true } ,watch: true // æŒç»­ç›‘å¬ï¼Œç”Ÿæˆæ–°çš„</li>\n<li>æ‰§è¡Œ npx webpack server</li>\n</ol>\n<h4 id=\"4.2-tree-shaking-æ ‘æ‘‡\">4.2 Tree-Shaking æ ‘æ‘‡<a title=\"#4.2-tree-shaking-æ ‘æ‘‡\" href=\"#4.2-tree-shaking-æ ‘æ‘‡\"></a></h4>\n<p>å¼€å¯æ ‘æ‘‡</p>\n<p>æ›´æ”¹é…ç½®é¡¹ï¼š</p>\n<ul>\n<li>\n<p>mode: â€productionâ€œ,</p>\n</li>\n<li>\n<p>optimization: { usedExports: true }</p>\n</li>\n</ul>\n<blockquote>\n<p>å¯¹å·¥å…·åº“å¦‚Lodashæœ‰å¥‡æ•ˆ</p>\n<p>require ä¸èƒ½è¿›è¡Œ tree-shaking</p>\n</blockquote>\n<h4 id=\"4.3-å…¶ä»–å·¥å…·\">4.3 å…¶ä»–å·¥å…·<a title=\"#4.3-å…¶ä»–å·¥å…·\" href=\"#4.3-å…¶ä»–å·¥å…·\"></a></h4>\n<ul>\n<li>ç¼“å­˜ webpack5åçš„ç¼“å­˜æ•ˆæœæ‰æ¯”è¾ƒå¥½</li>\n<li>Sourcemap</li>\n<li>æ€§èƒ½ç›‘æ§</li>\n<li>æ—¥å¿—</li>\n<li>ä»£ç å‹ç¼©</li>\n<li>åˆ†åŒ…</li>\n<li>â€¦</li>\n</ul>\n<blockquote>\n<p>è¿˜æœ‰å“ªäº›å¯è¢«åˆ’åˆ†ä¸ºâ€æµç¨‹ç±»â€œï¼Ÿ</p>\n<p>å·¥å…·ç±»é…ç½®å…·ä½“æœ‰ä»€ä¹ˆä½œç”¨ï¼ŒåŒ…æ‹¬ devtool/cache/stat</p>\n</blockquote>\n<h2 id=\"3.-ç†è§£-loader\">3. ç†è§£ Loader<a title=\"#3.-ç†è§£-loader\" href=\"#3.-ç†è§£-loader\"></a></h2>\n<p><strong>ä¸ºäº†å¤„ç†éæ ‡å‡† js èµ„æºï¼Œè®¾è®¡å‡ºèµ„æºç¿»è¯‘æ¨¡å— â€” Loaderï¼Œç”¨äºå°†èµ„æºç¿»è¯‘ä¸ºæ ‡å‡†  JS</strong></p>\n<h3 id=\"3.1-ä½¿ç”¨ï¼š\">3.1 ä½¿ç”¨ï¼š<a title=\"#3.1-ä½¿ç”¨ï¼š\" href=\"#3.1-ä½¿ç”¨ï¼š\"></a></h3>\n<ol>\n<li>å®‰è£… Loader</li>\n<li>æ·»åŠ  module å¤„ç† éœ€è¦ç¿»è¯‘çš„æ–‡ä»¶</li>\n</ol>\n<h3 id=\"3.2-è®¤è¯†loader\">3.2 è®¤è¯†Loader<a title=\"#3.2-è®¤è¯†loader\" href=\"#3.2-è®¤è¯†loader\"></a></h3>\n<h4 id=\"é“¾å¼è°ƒç”¨\">é“¾å¼è°ƒç”¨<a title=\"#é“¾å¼è°ƒç”¨\" href=\"#é“¾å¼è°ƒç”¨\"></a></h4>\n<p>å‰é¢çš„è¾“å‡º == åé¢çš„è¾“å…¥ï¼Œæ¯ä¸ª loader æ¯”è¾ƒå†…èšï¼Œ</p>\n<p>ä»¥ å¤„ç† less æ–‡ä»¶ä¸ºä¾‹ï¼š</p>\n<ul>\n<li>less-loaderï¼šå®ç° less åˆ° css çš„è½¬æ¢</li>\n<li>css-loaderï¼šå°† css åŒ…è£…æˆç±»ä¼¼äº module.exports = â€œ${css}â€ çš„å†…å®¹ï¼ŒåŒ…è£…åçš„å†…å®¹ç¬¦åˆjs è¯­æ³•</li>\n<li>style-loaderï¼šå°† css æ¨¡å—åŒ…è¿› require è¯­å¥ï¼Œå¹¶åœ¨è¿è¡Œæ—¶è°ƒç”¨ injectStyle ç­‰å‡½æ•°å°†å†…å®¹æ³¨å…¥åˆ°é¡µé¢çš„styleæ ‡ç­¾</li>\n</ul>\n<p>debugå·¥å…·ï¼š ndb <code>ndb npx webpack</code></p>\n<p>ç‰¹ç‚¹ï¼š</p>\n<ul>\n<li>é“¾å¼è°ƒç”¨</li>\n<li>æ”¯æŒå¼‚æ­¥æ‰§è¡Œ</li>\n<li>åˆ† normalã€pitch ä¸¤ç§æ¨¡å¼</li>\n</ul>\n<h4 id=\"å¦‚ä½•ç¼–å†™\">å¦‚ä½•ç¼–å†™<a title=\"#å¦‚ä½•ç¼–å†™\" href=\"#å¦‚ä½•ç¼–å†™\"></a></h4>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// loader.js</span></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = <span class=\"keyword\">function</span>(<span class=\"params\">source,sourceMap,data?</span>)&#123;</span><br><span class=\"line\">    <span class=\"comment\">// source ä¸º æ–‡ä»¶è¾“å…¥</span></span><br><span class=\"line\">    <span class=\"comment\">// å¯èƒ½æ˜¯æ–‡ä»¶å†…å®¹ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸Šä¸€ä¸ª loader å¤„ç†ç»“æœ</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> source;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// eslint-loader/index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> getOptions <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./getOptions&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Linter</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./Linter&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> cacheLoader <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./cacheLoader&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> defalut <span class=\"keyword\">function</span> <span class=\"title function_\">loader</span>(<span class=\"params\">content, map</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> options = <span class=\"title function_\">getOptions</span>(<span class=\"variable language_\">this</span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> linter = <span class=\"keyword\">new</span> <span class=\"title class_\">Linter</span>(<span class=\"variable language_\">this</span>, options);</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"title function_\">cacheable</span>();</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">if</span>(options.<span class=\"property\">cache</span>)&#123;</span><br><span class=\"line\">        <span class=\"title function_\">cacheLoader</span>(linter, content, map);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    linter.<span class=\"title function_\">printOutput</span>(linter.<span class=\"title function_\">lint</span>(content));</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"title function_\">callback</span>(<span class=\"literal\">null</span>, content, map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å‚è€ƒï¼šWebpack åŸç†ç³»åˆ—ä¸ƒï¼šå¦‚ä½•ç¼–å†™loader</p>\n<h4 id=\"å¸¸è§loader\">å¸¸è§loader<a title=\"#å¸¸è§loader\" href=\"#å¸¸è§loader\"></a></h4>\n<p>ç†è§£</p>\n<ul>\n<li>jsï¼šbabelã€eslintã€tsã€bubleã€vueã€angular2-template   - loader</li>\n<li>cssï¼šcssã€styleã€lessã€sassã€stylusã€postcss - loader</li>\n<li>htmlï¼šhtmlã€pugã€pisthtml - loader</li>\n<li>assetsï¼šfileã€valã€urlã€json5 - loader</li>\n</ul>\n<blockquote>\n<p>loader è¾“å…¥æ˜¯ä»€ä¹ˆï¼Ÿè¦æ±‚è¾“å‡ºçš„æ˜¯ä»€ä¹ˆï¼Ÿ</p>\n<p>loader çš„é“¾å¼è°ƒç”¨æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿå¦‚ä½•ä¸²è”å¤šä¸ª loaderï¼Ÿ</p>\n<p>loader ä¸­å¦‚ä½•å¤„ç†å¼‚æ­¥åœºæ™¯ï¼Ÿ</p>\n</blockquote>\n<h2 id=\"4.-ç†è§£æ’ä»¶\">4. ç†è§£æ’ä»¶<a title=\"#4.-ç†è§£æ’ä»¶\" href=\"#4.-ç†è§£æ’ä»¶\"></a></h2>\n<h3 id=\"4.1-æ’ä»¶æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Ÿ\">4.1 æ’ä»¶æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Ÿ<a title=\"#4.1-æ’ä»¶æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Ÿ\" href=\"#4.1-æ’ä»¶æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Ÿ\"></a></h3>\n<p>æ’ä»¶æ¶æ„ç²¾é«“ï¼šå¯¹æ‰©å±•å¼€æ”¾ã€å¯¹ä¿®æ”¹å°é—­</p>\n<h3 id=\"4.2-ç†è§£æ’ä»¶\">4.2 ç†è§£æ’ä»¶<a title=\"#4.2-ç†è§£æ’ä»¶\" href=\"#4.2-ç†è§£æ’ä»¶\"></a></h3>\n<p>æ’ä»¶å›´ç»•é’©å­å±•å¼€</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">SomePlugin</span>&#123;</span><br><span class=\"line\">    <span class=\"title function_\">apply</span>(<span class=\"params\">compiler</span>)&#123;</span><br><span class=\"line\">        compiler.<span class=\"property\">hooks</span>.<span class=\"property\">thisCompilation</span>.<span class=\"title function_\">tap</span>(<span class=\"string\">&#x27;SomePlugin&#x27;</span>, <span class=\"function\"><span class=\"params\">compilation</span> =&gt;</span> &#123;</span><br><span class=\"line\">            </span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>é’©å­çš„æ ¸å¿ƒä¿¡æ¯ï¼š</p>\n<ol>\n<li>æ—¶æœºï¼šç¼–è¯‘è¿‡ç¨‹çš„ç‰¹å®šèŠ‚ç‚¹ï¼ŒWebpack ä¼šä»¥é’©å­çš„å½¢å¼é€šçŸ¥æ’ä»¶æ­¤åˆ»æ­£åœ¨å‘ç”Ÿä»€ä¹ˆäº‹è¯·</li>\n<li>ä¸Šä¸‹æ–‡ï¼šé€šè¿‡ tapable æä¾›çš„å›è°ƒæœºåˆ¶ï¼Œä»¥å‚æ•°æ–¹å¼ä¼ é€’ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼›</li>\n<li>äº¤äº’ï¼šåœ¨ä¸Šä¸‹æ–‡å‚æ•°å¯¹è±¡ä¸­é™„å¸¦äº†å¾ˆå¤šå­˜åœ¨ side effect çš„äº¤äº’æ¥å£ï¼Œæ’ä»¶å¯ä»¥é€šè¿‡è¿™äº›æ¥å£æ”¹å˜</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">EntryPlugin</span>&#123;</span><br><span class=\"line\">    <span class=\"title function_\">apply</span>(<span class=\"params\">compiler</span>)&#123;</span><br><span class=\"line\">        compiler.<span class=\"property\">hooks</span>.<span class=\"property\">compilation</span>.<span class=\"title function_\">tap</span>( <span class=\"comment\">// æ—¶æœº compiler.hooks.compilation</span></span><br><span class=\"line\">            <span class=\"string\">&#x27;EntryPlugin&#x27;</span>,</span><br><span class=\"line\">             <span class=\"function\">(<span class=\"params\">compilation,&#123; normalModuleFactory &#125;</span>) =&gt;</span> &#123;  <span class=\"comment\">// å‚æ•° compilation</span></span><br><span class=\"line\">                 compilation.<span class=\"property\">dependencyfactories</span>.<span class=\"title function_\">set</span>(  <span class=\"comment\">// äº¤äº’ dependencyfactories.set</span></span><br><span class=\"line\">                 \t<span class=\"title class_\">EntryDenpendency</span>,</span><br><span class=\"line\">                    noemalModuleFactory</span><br><span class=\"line\">                 );</span><br><span class=\"line\">             &#125;);</span><br><span class=\"line\">        </span><br><span class=\"line\">        compiler.<span class=\"property\">hooks</span>.<span class=\"property\">make</span>.<span class=\"title function_\">tapAsync</span>(<span class=\"string\">&#x27;EntryPlugin&#x27;</span>, <span class=\"function\">(<span class=\"params\">compilation, callback</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">const</span> &#123;entry,options, context &#125; = <span class=\"variable language_\">this</span>;</span><br><span class=\"line\">            <span class=\"keyword\">const</span> dep = <span class=\"title class_\">EntryPlugin</span>.<span class=\"title function_\">createDependency</span>(entry, options);</span><br><span class=\"line\">            compilation.<span class=\"title function_\">addEntry</span>(context, dep, options, <span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">                <span class=\"title function_\">callback</span>(err);</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">            </span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>loader ä¸æ’ä»¶æœ‰ä»€ä¹ˆåŒºåŒç‚¹ï¼Ÿ</p>\n<p>â€é’©å­â€œæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿå¦‚ä½•ç›‘å¬é’©å­å‡½æ•°ï¼Ÿ</p>\n</blockquote>\n<h2 id=\"5.-å­¦ä¹ æ–¹æ³•\">5. å­¦ä¹ æ–¹æ³•<a title=\"#5.-å­¦ä¹ æ–¹æ³•\" href=\"#5.-å­¦ä¹ æ–¹æ³•\"></a></h2>\n<ol>\n<li>å…¥é—¨åº”ç”¨\n<ul>\n<li>ç†è§£æ‰“åŒ…æµç¨‹</li>\n<li>ç†Ÿç»ƒæŒæ¡å¸¸ç”¨é…ç½®é¡¹ã€loaderã€æ’ä»¶çš„ä½¿ç”¨æ–¹æ³•ã€èƒ½å¤Ÿçµæ´»æ­å»ºé›†æˆ Vueã€Reactã€Babelã€Eslintã€Lessã€Sassã€å›¾ç‰‡å¤„ç†ç­‰å·¥å…·çš„webpackç¯å¢ƒ</li>\n<li>æŒæ¡å¸¸è§è„šæ‰‹æ¶å·¥å…·ï¼Œä¾‹å¦‚ Vue-cliã€create-react-appã€@angular/cli</li>\n</ul>\n</li>\n<li>è¿›é˜¶\n<ul>\n<li>ç†è§£Loaderã€Pluginæœºåˆ¶ï¼Œèƒ½å¤Ÿè‡ªè¡Œå¼€å‘ Webpack ç»„ä»¶</li>\n<li>ç†è§£å¸¸è§æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µï¼Œå¹¶èƒ½ç”¨äºè§£å†³å®é™…é—®é¢˜</li>\n<li>ç†è§£å‰ç«¯å·¥ç¨‹åŒ–æ¦‚å¿µä¸ç”Ÿæ€ç°çŠ¶</li>\n</ul>\n</li>\n<li>å¤§å¸ˆçº§\n<ul>\n<li>é˜…è¯»æºç ï¼Œç†è§£ ç¼–è¯‘ã€æ‰“åŒ…åŸç†ï¼Œèƒ½å‚ä¸å…±å»º</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"q&amp;a\">Q&amp;A<a title=\"#q&amp;a\" href=\"#q&amp;a\"></a></h2>\n<h5 id=\"é¢è¯•æŒæ¡ç¨‹åº¦ï¼Ÿ\">é¢è¯•æŒæ¡ç¨‹åº¦ï¼Ÿ<a title=\"#é¢è¯•æŒæ¡ç¨‹åº¦ï¼Ÿ\" href=\"#é¢è¯•æŒæ¡ç¨‹åº¦ï¼Ÿ\"></a></h5>\n<ul>\n<li>loader æœ‰ä»€ä¹ˆä½œç”¨ï¼Œæ€ä¹ˆå†™ loaderã€å¸¸è§çš„ loaderæœ‰ä»€ä¹ˆ</li>\n<li>æ€ä¹ˆå†™ä¸€ä¸ª æ’ä»¶</li>\n<li>bundleã€chunkã€module æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Ÿ</li>\n</ul>\n<h5 id=\"require-ä¸-import-å¯¼å…¥çš„åŒºåˆ«ï¼Ÿ\">require ä¸ import å¯¼å…¥çš„åŒºåˆ«ï¼Ÿ<a title=\"#require-ä¸-import-å¯¼å…¥çš„åŒºåˆ«ï¼Ÿ\" href=\"#require-ä¸-import-å¯¼å…¥çš„åŒºåˆ«ï¼Ÿ\"></a></h5>\n<ul>\n<li>åŠ¨æ€/é™æ€ä»£ç </li>\n</ul>\n<h5 id=\"webpack-ä¸-vite-ï¼Ÿ\">webpack ä¸ vite ï¼Ÿ<a title=\"#webpack-ä¸-vite-ï¼Ÿ\" href=\"#webpack-ä¸-vite-ï¼Ÿ\"></a></h5>\n<ul>\n<li>viteï¼šé€Ÿåº¦å¿« ï¼Œæ—  bundleï¼Œå¯¹å¼€å‘æ€§å‹å¥½</li>\n<li>webpackï¼šç”Ÿæ€æˆç†Ÿï¼Œ</li>\n</ul>\n<h5 id=\"loader-ä¸-plugin-åŒºåˆ«ï¼Ÿ\">loader ä¸ plugin åŒºåˆ«ï¼Ÿ<a title=\"#loader-ä¸-plugin-åŒºåˆ«ï¼Ÿ\" href=\"#loader-ä¸-plugin-åŒºåˆ«ï¼Ÿ\"></a></h5>\n<ul>\n<li>loaderï¼šå†…å®¹ç¿»è¯‘ä¸ºjs</li>\n<li>pluginï¼šæ²¡æœ‰æ˜ç¡®è¾“å…¥è¾“å‡ºï¼Œä½œç”¨äºæ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåœ¨ä»»æ„æ—¶é—´ä¿®æ”¹ä»»æ„webpackç»„ä»¶</li>\n</ul>\n<h5 id=\"webpack-ä¸-rollup\">webpack ä¸ rollup<a title=\"#webpack-ä¸-rollup\" href=\"#webpack-ä¸-rollup\"></a></h5>\n<ul>\n<li>webpack æ›´é‡ï¼Œåº”å¯¹æµè§ˆå™¨</li>\n<li>rollup ç”¨æ¥æ„å»ºnpmåŒ…ï¼Œæ‰©å±•æ€§å¼±ï¼Œåº”å¯¹åº“çš„åœºæ™¯</li>\n</ul>\n<h5 id=\"webpack-ä¼˜åŒ–\">webpack ä¼˜åŒ–<a title=\"#webpack-ä¼˜åŒ–\" href=\"#webpack-ä¼˜åŒ–\"></a></h5>\n<h5 id=\"npx-ä¸-npm\">npx ä¸ npm<a title=\"#npx-ä¸-npm\" href=\"#npx-ä¸-npm\"></a></h5>\n","prev":{"title":"WEB å¼€å‘çš„å®‰å…¨ä¹‹æ—… - å­—èŠ‚é’è®­è¥","link":"learningNotes/é’è®­è¥/10 åˆ˜å®‡æ™¨ web å¼€å‘çš„å®‰å…¨ä¹‹æ—…"},"next":{"title":"å‰ç«¯å¿…é¡»çŸ¥é“çš„å¼€å‘è°ƒè¯•çŸ¥è¯† - å­—èŠ‚é’è®­è¥","link":"learningNotes/é’è®­è¥/05 ç§ƒå¤´æŠ«é£ä¾  å‰ç«¯å¿…é¡»çŸ¥é“çš„å¼€å‘è°ƒè¯•çŸ¥è¯†"},"plink":"https://shylees.github.io/learningNotes/é’è®­è¥/12 ææ–‡æ° webpack/","toc":[{"id":"æ„å»º-webpack-çŸ¥è¯†ä½“ç³»","title":"æ„å»º webpack çŸ¥è¯†ä½“ç³»","index":"1","children":[{"id":"1.-ä»€ä¹ˆæ˜¯webpack","title":"1. ä»€ä¹ˆæ˜¯webpack","index":"1.1"},{"id":"2.-ä½¿ç”¨-webpack","title":"2. ä½¿ç”¨ webpack","index":"1.2","children":[{"id":"1.-ç¤ºä¾‹","title":"1. ç¤ºä¾‹","index":"1.2.1"},{"id":"2.-æ ¸å¿ƒæµç¨‹-â€”-æç®€åŒ–ç‰ˆ","title":"2. æ ¸å¿ƒæµç¨‹ â€” æç®€åŒ–ç‰ˆ","index":"1.2.2"},{"id":"3.-é…ç½®é¡¹æ¦‚è§ˆ","title":"3. é…ç½®é¡¹æ¦‚è§ˆ","index":"1.2.3"},{"id":"4.-å·¥å…·çº¿","title":"4. å·¥å…·çº¿","index":"1.2.4"}]},{"id":"3.-ç†è§£-loader","title":"3. ç†è§£ Loader","index":"1.3","children":[{"id":"3.1-ä½¿ç”¨ï¼š","title":"3.1 ä½¿ç”¨ï¼š","index":"1.3.1"},{"id":"3.2-è®¤è¯†loader","title":"3.2 è®¤è¯†Loader","index":"1.3.2"}]},{"id":"4.-ç†è§£æ’ä»¶","title":"4. ç†è§£æ’ä»¶","index":"1.4","children":[{"id":"4.1-æ’ä»¶æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Ÿ","title":"4.1 æ’ä»¶æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Ÿ","index":"1.4.1"},{"id":"4.2-ç†è§£æ’ä»¶","title":"4.2 ç†è§£æ’ä»¶","index":"1.4.2"}]},{"id":"5.-å­¦ä¹ æ–¹æ³•","title":"5. å­¦ä¹ æ–¹æ³•","index":"1.5"},{"id":"q&a","title":"Q&amp;A","index":"1.6"}]}],"copyright":{"custom":"ä¸è®¸è½¬è½½ğŸ˜¡ï¼ï¼ï¼"},"reading_time":"1733 words in 9 min"}