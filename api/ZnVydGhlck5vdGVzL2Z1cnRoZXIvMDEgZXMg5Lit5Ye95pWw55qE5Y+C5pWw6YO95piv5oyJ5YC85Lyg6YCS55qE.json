{"title":"展开讲讲红宝书提到的“es中...按值传递”","date":"2021-11-10T16:00:00.000Z","date_formatted":{"ll":"Nov 11, 2021","L":"11/11/2021","MM-DD":"11-11"},"link":"furtherNotes/further/01 es 中函数的参数都是按值传递的","tags":["JavaScript"],"categories":["furtherNotes"],"updated":"2021-11-10T16:00:00.000Z","content":"<blockquote>\n<p>第4版红宝书 4.1 提到 ECMAScript 中所有函数的值都是按值传递的</p>\n</blockquote>\n<h3 id=\"按值传递\">按值传递<a title=\"#按值传递\" href=\"#按值传递\"></a></h3>\n<blockquote>\n<p>原始值 很好理解，就是将值拷贝一份 成为参数，这个参数与外界原来的值，就没有任何联系了</p>\n</blockquote>\n<p>这里展开讲讲引用值</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> person = &#123; </span><br><span class=\"line\">    <span class=\"attr\">age</span>: <span class=\"number\">18</span> </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">add</span> (per) &#123;</span><br><span class=\"line\">    per.<span class=\"property\">age</span>++;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(per);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">add</span>(person);        <span class=\"comment\">// &#123; age: 19 &#125;</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(person) <span class=\"comment\">// &#123; age: 19 &#125;</span></span><br></pre></td></tr></table></figure>\n<p>这个例子的输出结果显然 就不符合 <strong>按值传递</strong>，是不是意味着 应该是 <strong>按引用传递</strong>呢？我们再看一个例子：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> person = &#123;</span><br><span class=\"line\">    <span class=\"attr\">age</span>: <span class=\"number\">18</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">add</span>(<span class=\"params\">per</span>)&#123;</span><br><span class=\"line\">    per = <span class=\"number\">20</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(per);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">add</span>(person);         <span class=\"comment\">//20</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(person); <span class=\"comment\">// &#123; age: 18 &#125;</span></span><br></pre></td></tr></table></figure>\n<p>这个例子的输出结果就有点 <strong>按值传递</strong> 了。</p>\n<p>那为什么会有这两种这么迷惑的结果呢？这就引出了第三种值的传递方式：<strong>按共享传递</strong>。</p>\n<p>顺便回顾下我们上面有说到的两种值的传递方式：</p>\n<ul>\n<li>\n<p><strong>按值传递</strong>：把值复制给另一个变量</p>\n</li>\n<li>\n<p><strong>按引用传递</strong>：把引用对象传给另一个变量，想到于两个变量指向同一个引用</p>\n</li>\n<li>\n<p><strong>按共享传递</strong>：把对象的引用副本传递给另一个变量</p>\n</li>\n</ul>\n<p><strong>所以，就上面的例子来说，修改 <code>per.age</code> 会直接修改到原值，但直接修改 <code>per</code> 并不会修改原值。</strong></p>\n<p>其实拷贝副本也算是一种值的拷贝，所以红宝书直接认为是按值传递也没有说不过去。</p>\n<p>总结：若参数为 原始类型 就是  按值传递，若参数为 引用类型 就是 按共享传递</p>\n","prev":{"title":"视差滚动","link":"furtherNotes/further/03 视差滚动"},"next":{"title":"Ajax","link":"furtherNotes/further/02 ajax"},"plink":"https://shylees.github.io/furtherNotes/further/01 es 中函数的参数都是按值传递的/","toc":[{"id":"按值传递","title":"按值传递","index":"1"}],"copyright":{"custom":"不许转载😡！！！"},"reading_time":"421 words in 2 min"}