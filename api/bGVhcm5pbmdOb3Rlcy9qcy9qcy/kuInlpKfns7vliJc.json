{"title":"js webAPI--offset、client、scroll","date":"2021-03-05T16:00:00.000Z","date_formatted":{"ll":"2021年3月6日","L":"2021/03/06","MM-DD":"03-06"},"link":"learningNotes/js/js/三大系列","tags":["js"],"categories":["js","learningNotes"],"updated":"2021-03-07T16:00:00.000Z","content":"<h3 id=\"1.元素偏移量offset系列\">1.元素偏移量offset系列<a title=\"#1.元素偏移量offset系列\" href=\"#1.元素偏移量offset系列\"></a></h3>\n<h4 id=\"1.1-offset概述\">1.1 offset概述<a title=\"#1.1-offset概述\" href=\"#1.1-offset概述\"></a></h4>\n<p>offset就是偏移量的意思，使用offset系列相关属性可以<font color='red'>动态</font>的得到该元素的位置（偏移）、大小等。</p>\n<ul>\n<li>获取元素距离<strong>带有定位</strong>的父元素的位置</li>\n<li>获得元素自身的大小</li>\n<li>返回的数值<strong>不带单位</strong></li>\n</ul>\n<p>offset 系列常用属性：</p>\n<div class=\"φbq\"><div class=\"φbs\"><table><thead>\n<tr>\n<th>offset系列常用属性</th>\n<th>作用</th>\n<th style=\"padding:0\"></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>element.offsetParent</td>\n<td>返回作为该元素<strong>带有定位</strong>的父级元素 if都无 则返回body</td>\n<td></td>\n</tr>\n<tr>\n<td>element.offsetTop</td>\n<td>返回元素相对<strong>带有定位</strong>父元素上方的偏移</td>\n<td></td>\n</tr>\n<tr>\n<td>element.offsetLeft</td>\n<td>返回元素相对<strong>带有定位</strong>父元素左边框的偏移</td>\n<td></td>\n</tr>\n<tr>\n<td>element.offsetWidth</td>\n<td>返回自身包括padding、边框、内容区的宽度，不带单位</td>\n<td></td>\n</tr>\n<tr>\n<td>element.offsetHeight</td>\n<td>返回自身包括padding、边框、内容区的高度，不带单位</td>\n<td></td>\n</tr>\n</tbody>\n</table></div></div><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\">        </span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-class\">.father</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">position</span>: relative;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">margin</span>: <span class=\"number\">150px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">background-color</span>: antiquewhite;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">        </span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-class\">.son</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">margin</span>: <span class=\"number\">20px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">background-color</span>: brown;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;father&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;son&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> father = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.father&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> son = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.son&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//1.可以得到元素的偏移量</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(father.<span class=\"property\">offsetTop</span>); <span class=\"comment\">//150 if加上padding 150</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(son.<span class=\"property\">offsetLeft</span>); <span class=\"comment\">//if.father 没有定位 : 170  if.father 加上定位 :20 if.father 加上padding 40</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//2.可以得到元素的大小</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(father.<span class=\"property\">offsetHeight</span>); <span class=\"comment\">//240  包含padding+border+width</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//3.返回带有定位的父元素 or 返回body</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(son.<span class=\"property\">offsetParent</span>); <span class=\"comment\">//返回最近一级有定位的父亲</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(son.<span class=\"property\">parentNode</span>); <span class=\"comment\">//返回亲父亲</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span> </span><br></pre></td></tr></table></figure>\n<h4 id=\"1.2-offset-与-style-区别\">1.2 offset 与 style 区别<a title=\"#1.2-offset-与-style-区别\" href=\"#1.2-offset-与-style-区别\"></a></h4>\n<p>offset：</p>\n<ul>\n<li>offset 可以得到任意样式表中的样式值</li>\n<li>offset 系列获得的数值是没有单位的</li>\n<li>offsetWidth 包含padding + border + width</li>\n<li>offsetWidth 等属性是只读属性，只能获取不能赋值</li>\n<li><font color='red'>所以，我们想要获取元素大小位置，用 offset 更合适</font></li>\n</ul>\n<p>style：</p>\n<ul>\n<li>style 只能得到行内样式表中的样式值</li>\n<li>style.width 获得的是带有单位的字符串</li>\n<li>style.width 获得不包含 padding 和border 的值</li>\n<li>style.width 是可读写属性，可以获取也可以赋值</li>\n<li><font color='red'>所以，我们想要给元素更改值，则需要用style</font></li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"selector-class\">.box</span>&#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">width</span>:<span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">height</span>:<span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&#x27;box&#x27;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"keyword\">let</span> box = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.box&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(box.<span class=\"property\">offsetWidth</span>); <span class=\"comment\">//200</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(box.<span class=\"property\">style</span>.<span class=\"property\">width</span>); <span class=\"comment\">//若无行内 则不输出 if .box加上 style=&#x27;width：200px&#x27;  200px</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"comment\">//offsetwidth 赋值 对box/12行 输出 无影响</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"comment\">//.style.width 就会改值</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"1.3--案例之获取鼠标相对于盒子的位置\">1.3  案例之获取鼠标相对于盒子的位置<a title=\"#1.3--案例之获取鼠标相对于盒子的位置\" href=\"#1.3--案例之获取鼠标相对于盒子的位置\"></a></h4>\n<blockquote>\n<p>盒子在页面中的距离 box.offsetLeft box.offsetTop</p>\n<p>鼠标在页面中的坐标 e.pageX e.pageY</p>\n</blockquote>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">    * &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    </span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"selector-class\">.box</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">margin</span>: <span class=\"number\">50px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">background-color</span>: brown;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">let</span> box = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.box&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    box.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"keyword\">function</span>(<span class=\"params\">e</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> x = e.<span class=\"property\">pageX</span> - box.<span class=\"property\">offsetLeft</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> y = e.<span class=\"property\">pageY</span> - box.<span class=\"property\">offsetTop</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(x, y);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"1.4-案例之模态框的拖拽\">1.4 案例之模态框的拖拽<a title=\"#1.4-案例之模态框的拖拽\" href=\"#1.4-案例之模态框的拖拽\"></a></h4>\n<p>原理：鼠标按下并且移动，松开鼠标</p>\n<p>事件：鼠标按下mousedown 鼠标移动mousemove 鼠标松开mouseup</p>\n<p>过程：鼠标移动过程中，获得最新的值赋值给模态框的left和top值</p>\n<p>模态框的位置：鼠标的坐标减去鼠标在盒子内的坐标</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">    * &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    </span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"selector-tag\">div</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">position</span>: relative;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">top</span>: <span class=\"number\">50%</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">left</span>: <span class=\"number\">50%</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">transform</span>: <span class=\"built_in\">translate</span>(-<span class=\"number\">50%</span>, <span class=\"number\">50%</span>);</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">width</span>: <span class=\"number\">300px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">height</span>: <span class=\"number\">150px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">background-color</span>: plum;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    </span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"selector-class\">.hide</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">position</span>: absolute;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">top</span>: <span class=\"number\">0px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">right</span>: <span class=\"number\">5px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;show&quot;</span>&gt;</span>点击弹出<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;model&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;hide&quot;</span>&gt;</span>x<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">let</span> show = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.show&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">let</span> model = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.model&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">let</span> hide = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.hide&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    show.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        model.<span class=\"property\">style</span>.<span class=\"property\">display</span> = <span class=\"string\">&#x27;block&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    model.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;mousedown&#x27;</span>, <span class=\"keyword\">function</span>(<span class=\"params\">e</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//1.鼠标按下，获得鼠标在盒子内的坐标 —— 不变的</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> clickX = e.<span class=\"property\">pageX</span> - model.<span class=\"property\">offsetLeft</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> clickY = e.<span class=\"property\">pageY</span> - model.<span class=\"property\">offsetTop</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">// console.log(clickX, clickY);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//2.鼠标移动过程中，获得最新的值 变的长度-不变的长度 赋值给模态框的left和top值</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"variable language_\">document</span>.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;mousemove&#x27;</span>, move);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">function</span> <span class=\"title function_\">move</span>(<span class=\"params\">ec</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">            model.<span class=\"property\">style</span>.<span class=\"property\">left</span> = ec.<span class=\"property\">pageX</span> - clickX + <span class=\"string\">&#x27;px&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            model.<span class=\"property\">style</span>.<span class=\"property\">top</span> = ec.<span class=\"property\">pageY</span> - clickY + <span class=\"string\">&#x27;px&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//3.鼠标弹起 移除鼠标移动事件</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"variable language_\">document</span>.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;mouseup&#x27;</span>, <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"variable language_\">document</span>.<span class=\"title function_\">removeEventListener</span>(<span class=\"string\">&#x27;mousemove&#x27;</span>, move);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;)</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    hide.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"variable language_\">this</span>.<span class=\"property\">arentNode</span>.<span class=\"property\">style</span>.<span class=\"property\">display</span> = <span class=\"string\">&#x27;none&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2.元素可视区client系列\">2.元素可视区client系列<a title=\"#2.元素可视区client系列\" href=\"#2.元素可视区client系列\"></a></h3>\n<p>client就是客户端的意思，我们使用client系列的相关属性来获取元素可视区的相关信息。通过client系列的相关属性可以动态的得到该元素的边框大小、元素大小等。</p>\n<div class=\"φbq\"><div class=\"φbs\"><table><thead>\n<tr>\n<th>client系列属性</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>element.clientTop</td>\n<td>返回元素上边框的大小</td>\n</tr>\n<tr>\n<td>element.clientLeft</td>\n<td>返回元素左边框的大小</td>\n</tr>\n<tr>\n<td>element.clientWidth</td>\n<td>返回自身包括padding、内容区的宽度、不包含边框，不带单位</td>\n</tr>\n<tr>\n<td>element.clientHeight</td>\n<td>返回自身包括padding、内容区的高度、不包含边框，不带单位</td>\n</tr>\n</tbody>\n</table></div></div><h3 id=\"3.元素scroll系列\">3.元素scroll系列<a title=\"#3.元素scroll系列\" href=\"#3.元素scroll系列\"></a></h3>\n<h4 id=\"3.1元素scroll系列属性\">3.1元素scroll系列属性<a title=\"#3.1元素scroll系列属性\" href=\"#3.1元素scroll系列属性\"></a></h4>\n<p>scroll就是滚动的的意思，使用scroll系列相关属性可以动态得到该元素的大小、滚动距离等。</p>\n<div class=\"φbq\"><div class=\"φbs\"><table><thead>\n<tr>\n<th>scroll系列属性</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>element.scrollTop</td>\n<td>返回被卷去的上侧距离，不带单位</td>\n</tr>\n<tr>\n<td>element.scrollLeft</td>\n<td>返回被卷去的左侧距离，不带单位</td>\n</tr>\n<tr>\n<td>element.scrollWidth</td>\n<td>返回自身实际宽度 不含边框，不带单位</td>\n</tr>\n<tr>\n<td>element.scrollHeight</td>\n<td>返回自身实际高度，不含边框，不带单位</td>\n</tr>\n</tbody>\n</table></div></div><blockquote>\n<p>element.scrollWidth ：if内容超过宽度 则比宽度大，包含padding，可以说是实际内容的大小</p>\n</blockquote>\n<img src='https://s1.328888.xyz/2022/04/09/XnWs2.png' style=\"zoom:50%;\" >\n<h4 id=\"3.2-页面被卷去的头部\">3.2 页面被卷去的头部<a title=\"#3.2-页面被卷去的头部\" href=\"#3.2-页面被卷去的头部\"></a></h4>\n<p>如果浏览器的高/宽度不足以显示整个页面时，会自动出现滚动条。当滚动条向下滚动时，页面上面被隐藏掉的高度，称为页面被卷去的头部。滚动条在滚动时会触发onscroll事件。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">div.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;scroll&#x27;</span>,<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(div.<span class=\"property\">scrollTop</span>);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h4 id=\"3.3-案例之返回顶部\">3.3 案例之返回顶部<a title=\"#3.3-案例之返回顶部\" href=\"#3.3-案例之返回顶部\"></a></h4>\n<ul>\n<li>需要用到页面滚动事件scroll 因为是<font color='red'>页面滚动，所以事件源是document</font></li>\n<li>滚动到某个位置，就是判断页面被卷去的上部值</li>\n<li><font color='red'>页面被卷去的头部：可以通过window.pageYOffset获得</font> (如果是页面被卷曲的左侧 <font color='red'>window.pageXOfffset</font>)</li>\n<li>注意，<font color='red'>元素</font>被卷去的头部是<font color='red'>element.scrollTop</font>，如果是<font color='red'>页面</font>被卷去的头部则是<font color='red'>window.pageYOffset</font></li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;slider-bar&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;goBack&quot;</span>&gt;</span>返回顶部<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;header w&quot;</span>&gt;</span>头部区域<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;banner w&quot;</span>&gt;</span>banner区域<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;main w&quot;</span>&gt;</span>主体部分<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//1.获取元素</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">var</span> sliderbar = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.slider-bar&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">var</span> banner = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.banner&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//但我们侧边栏固定定位之后应该变化的值</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> tops = sliderbar.<span class=\"property\">offsetTop</span> - banner.<span class=\"property\">offsetTop</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//获取main 主体元素</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">var</span> main = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.main&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">var</span> goBack = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.goBack&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//2.页面滚动事件 scroll</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"variable language_\">document</span>.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;scroll&#x27;</span>, <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"comment\">//3.当页面被卷去的头部   大于等于banner区域  侧边栏改为固定定位</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">if</span> (<span class=\"variable language_\">window</span>.<span class=\"property\">pageYOffset</span> &gt;= banner.<span class=\"property\">offsetTop</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                sliderbar.<span class=\"property\">style</span>.<span class=\"property\">position</span> = <span class=\"string\">&#x27;fixed&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                sliderbar.<span class=\"property\">style</span>.<span class=\"property\">top</span> = tops + <span class=\"string\">&#x27;px&#x27;</span>; <span class=\"comment\">//tops 得再外面定义 不然值会变的</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            &#125; <span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                sliderbar.<span class=\"property\">style</span>.<span class=\"property\">position</span> = <span class=\"string\">&#x27;absolute&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                sliderbar.<span class=\"property\">style</span>.<span class=\"property\">top</span> = <span class=\"string\">&#x27;300px&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"comment\">//4.当页面滚动到main 盒子就显示goback模块</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">if</span> (<span class=\"variable language_\">window</span>.<span class=\"property\">pageYOffset</span> &gt;= main.<span class=\"property\">offsetTop</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                goBack.<span class=\"property\">style</span>.<span class=\"property\">display</span> = <span class=\"string\">&#x27;block&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            &#125; <span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                goBack.<span class=\"property\">style</span>.<span class=\"property\">display</span> = <span class=\"string\">&#x27;none&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"3.4-页面被卷去的头部兼容性解决方案\">3.4 页面被卷去的头部兼容性解决方案<a title=\"#3.4-页面被卷去的头部兼容性解决方案\" href=\"#3.4-页面被卷去的头部兼容性解决方案\"></a></h4>\n<p>因此被卷去的头部通常有如下几种写法：</p>\n<ol>\n<li>\n<p>声明了DTD(<code>&lt;!DOCTYPE html&gt;</code>)，使用<code>document.documentElement.scrollTop</code></p>\n</li>\n<li>\n<p>未声明DTD，使用<code>document.body.scrollTop</code></p>\n</li>\n<li>\n<p>新方法<code>window.pageYOffset </code>和 <code>window.pageXOffset</code> ，IE9开始支持</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">getScroll</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span>&#123;</span><br><span class=\"line\">        <span class=\"attr\">left</span>:<span class=\"variable language_\">window</span>.<span class=\"property\">pageXOffset</span> || <span class=\"variable language_\">document</span>.<span class=\"property\">documentElement</span>.<span class=\"property\">scrollLeft</span> || <span class=\"variable language_\">document</span>.<span class=\"property\">body</span>.<span class=\"property\">scrollLeft</span> || <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"attr\">top</span>:<span class=\"variable language_\">window</span>.<span class=\"property\">pageYOffset</span> || <span class=\"variable language_\">document</span>.<span class=\"property\">documentElement</span>.<span class=\"property\">scrollTop</span> || <span class=\"variable language_\">document</span>.<span class=\"property\">body</span>.<span class=\"property\">scrollTop</span> || <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//使用时 getScroll().left</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"三大系列总结\">三大系列总结<a title=\"#三大系列总结\" href=\"#三大系列总结\"></a></h3>\n<div class=\"φbq\"><div class=\"φbs\"><table><thead>\n<tr>\n<th>三大系列大小对比</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>element.offsetWidth</td>\n<td>返回自身+padding+边框，内容区的宽度</td>\n</tr>\n<tr>\n<td>element.clientWidth</td>\n<td>返回自身+padding，内容区的宽度</td>\n</tr>\n<tr>\n<td>element.scrollWidth</td>\n<td>返回自身实际宽度，+padding</td>\n</tr>\n</tbody>\n</table></div></div><img src='https://s1.328888.xyz/2022/04/09/XnzVM.png'>\n<h4 id=\"主要用法：\">主要用法：<a title=\"#主要用法：\" href=\"#主要用法：\"></a></h4>\n<ol>\n<li>offset 系列：获取元素的位置 <font color='red'>offsetLeft   offsetTop</font></li>\n<li>client 系列：获取元素大小  <font color='red'>clientWidth   clientHeight</font></li>\n<li>scroll系列：获取滚动距离  <font color='red'>scrollTop   scrollLeft</font></li>\n<li><font color='red'>页面的滚动距离</font>通过 <font color='red'>window.pageXOffset</font> 获得</li>\n</ol>\n","prev":{"title":"02 Vue基础语法","link":"learningNotes/vue/vue/02 Vue基础语法"},"next":{"title":"立即执行函数","link":"learningNotes/js/js/立即执行函数"},"plink":"https://shylees.github.io/learningNotes/js/js/三大系列/","toc":[{"id":"1.元素偏移量offset系列","title":"1.元素偏移量offset系列","index":"1"},{"id":"2.元素可视区client系列","title":"2.元素可视区client系列","index":"2"},{"id":"3.元素scroll系列","title":"3.元素scroll系列","index":"3"},{"id":"三大系列总结","title":"三大系列总结","index":"4"}],"copyright":{"custom":"不许转载😡！！！"},"reading_time":"2079 words in 10 min"}