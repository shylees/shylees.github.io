{"title":"èŠ‚æµthrottleã€é˜²æŠ–debounce","date":"2021-11-12T16:00:00.000Z","date_formatted":{"ll":"Nov 13, 2021","L":"11/13/2021","MM-DD":"11-13"},"link":"furtherNotes/further/05 èŠ‚æµé˜²æŠ–","tags":["js"],"categories":["furtherNotes"],"updated":"2021-11-12T16:00:00.000Z","content":"<blockquote>\n<p>å‚è€ƒé“¾æ¥ï¼š</p>\n<p><a href=\"https://www.jianshu.com/p/566c66aafa22\">https://www.jianshu.com/p/566c66aafa22</a></p>\n<p><a href=\"https://juejin.cn/post/6959161295358656520\">https://juejin.cn/post/6959161295358656520</a></p>\n</blockquote>\n<h3 id=\"1.-æ¦‚å¿µ\">1. æ¦‚å¿µ<a title=\"#1.-æ¦‚å¿µ\" href=\"#1.-æ¦‚å¿µ\"></a></h3>\n<h4 id=\"1.1-åº”ç”¨åœºæ™¯\">1.1 åº”ç”¨åœºæ™¯<a title=\"#1.1-åº”ç”¨åœºæ™¯\" href=\"#1.1-åº”ç”¨åœºæ™¯\"></a></h4>\n<p>é«˜é¢‘è§¦å‘äº‹ä»¶æ—¶ï¼Œå¯èƒ½ä¼šé¢‘ç¹æ‰§è¡ŒDOMæ“ä½œï¼Œèµ„æºåŠ è½½ç­‰ï¼Œå¯¼è‡´UIåœé¡¿ç”šè‡³æµè§ˆå™¨å´©æºƒã€‚</p>\n<ul>\n<li>windowå¯¹è±¡é¢‘ç¹çš„ <code>onresize</code>ï¼Œ<code>onscroll</code>ç­‰äº‹ä»¶</li>\n<li>æ‹–æ‹½çš„ mousemove äº‹ä»¶</li>\n<li>å°„å‡»æ¸¸æˆçš„ mousedownï¼Œkeydown äº‹ä»¶</li>\n<li>æ–‡å­—è¾“å…¥ï¼Œè‡ªåŠ¨å®Œæˆçš„ keyup äº‹ä»¶</li>\n</ul>\n<h4 id=\"1.2-è§£å†³æ–¹æ¡ˆ\">1.2 è§£å†³æ–¹æ¡ˆ<a title=\"#1.2-è§£å†³æ–¹æ¡ˆ\" href=\"#1.2-è§£å†³æ–¹æ¡ˆ\"></a></h4>\n<p>å¯¹äº window å’Œ resize äº‹ä»¶ï¼Œå®é™…éœ€æ±‚å¤§å¤šä¸ºåœæ­¢æ”¹å˜å¤§äº n æ¯«ç§’åæ‰§è¡Œåç»­å¤„ç†ï¼›è€Œå…¶ä»–äº‹ä»¶å¤§å¤šæ•°çš„éœ€æ±‚æ˜¯ä»¥ä¸€å®šçš„é¢‘ç‡æ‰§è¡Œåç»­å¤„ç†ã€‚</p>\n<blockquote>\n<p>é’ˆå¯¹è¿™ä¸¤ç§éœ€æ±‚å‡ºç°äº† debounce å’Œ throttle ä¸¤ç§æ–¹å¼</p>\n</blockquote>\n<h4 id=\"1.3-èŠ‚æµ\">1.3 èŠ‚æµ<a title=\"#1.3-èŠ‚æµ\" href=\"#1.3-èŠ‚æµ\"></a></h4>\n<p>é«˜é¢‘äº‹ä»¶è§¦å‘ï¼Œ<strong>ä½†åœ¨ n ç§’<font color='red'>å†…</font>åªä¼šæ‰§è¡Œä¸€æ¬¡</strong>ï¼Œæ‰€ä»¥èŠ‚æµä¼šç¨€é‡Šå‡½æ•°çš„æ‰§è¡Œé¢‘ç‡</p>\n<blockquote>\n<p>æ¯”å¦‚mouseoverï¼Œresizeè¿™ç§äº‹ä»¶ï¼Œæ¯å½“æœ‰å˜åŒ–çš„æ—¶å€™ï¼Œå°±ä¼šè§¦å‘ä¸€æ¬¡å‡½æ•°ï¼Œè¿™æ ·å¾ˆæµªè´¹èµ„æºã€‚å°±æ¯”å¦‚ä¸€ä¸ªæŒç»­æµæ°´çš„æ°´é¾™å¤´ï¼Œæ°´é¾™å¤´å¼€åˆ°æœ€å¤§çš„æ—¶å€™å¾ˆæµªè´¹æ°´èµ„æºï¼Œå°†æ°´é¾™å¤´å¼€å¾—å°ä¸€ç‚¹ï¼Œè®©ä»–æ¯éš”200æ¯«ç§’æµå‡ºä¸€æ»´æ°´ï¼Œè¿™æ ·èƒ½æºæºä¸æ–­çš„æµå‡ºæ°´è€Œåˆä¸æµªè´¹ã€‚</p>\n<p>å¸¸è§ä¾‹å­ï¼šå³æ—¶æŸ¥è¯¢ã€ä¸æ–­ç‚¹å‡»ã€ç›‘å¬æ»šåŠ¨äº‹ä»¶è§¦åº•äº‹ä»¶</p>\n</blockquote>\n<h4 id=\"1.4-é˜²æŠ–\">1.4 é˜²æŠ–<a title=\"#1.4-é˜²æŠ–\" href=\"#1.4-é˜²æŠ–\"></a></h4>\n<p><strong>è§¦å‘é«˜é¢‘äº‹ä»¶<font color='red'>å </font>n ç§’å†…å‡½æ•°åªä¼šæ‰§è¡Œä¸€æ¬¡</strong>ï¼Œå¦‚æœnç§’å†…é«˜é¢‘äº‹ä»¶å†æ¬¡è¢«è§¦å‘ï¼Œåˆ™é‡æ–°è®¡ç®—æ—¶é—´</p>\n<blockquote>\n<p>Aå’ŒBè¯´è¯ï¼ŒAä¸€ç›´bbbbbbï¼Œå½“AæŒç»­è¯´äº†ä¸€æ®µæ—¶é—´çš„è¯ååœæ­¢è®²è¯ï¼Œè¿‡äº†10ç§’ä¹‹åï¼Œæˆ‘ä»¬åˆ¤å®šAè®²å®Œäº†ï¼ŒBå¼€å§‹å›ç­”Açš„è¯ï¼›å¦‚æœ10ç§’å†…Aåˆç»§ç»­è®²è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬åˆ¤å®šAæ²¡è®²å®Œï¼ŒBä¸å“åº”ï¼Œç­‰Aå†æ¬¡åœæ­¢åï¼Œæˆ‘ä»¬å†æ¬¡è®¡ç®—åœæ­¢çš„æ—¶é—´ï¼Œå¦‚æœè¶…è¿‡10ç§’Bå“åº”ï¼Œå¦‚æœæ²¡æœ‰åˆ™Bä¸å“åº”ã€‚</p>\n<p>å¸¸è§ä¾‹å­ï¼šç‚¹å‡»æŒ‰é’®ã€æ‹ç…§ã€ä¸‹æ‹‰è§¦åº•åŠ è½½ä¸‹ä¸€é¡µç­‰ã€search æœç´¢è”æƒ³ã€window è§¦å‘ resize</p>\n</blockquote>\n<h4 id=\"1.5-é˜²æŠ–å’ŒèŠ‚æµçš„åŒºåˆ«\">1.5 é˜²æŠ–å’ŒèŠ‚æµçš„åŒºåˆ«<a title=\"#1.5-é˜²æŠ–å’ŒèŠ‚æµçš„åŒºåˆ«\" href=\"#1.5-é˜²æŠ–å’ŒèŠ‚æµçš„åŒºåˆ«\"></a></h4>\n<ul>\n<li>å‡½æ•°é˜²æŠ–å’Œå‡½æ•°èŠ‚æµéƒ½æ˜¯é˜²æ­¢æŸä¸€æ—¶é—´å†…é¢‘ç¹è§¦å‘ã€‚</li>\n<li>å‡½æ•°é˜²æŠ–æ˜¯åœ¨æŒ‡å®šæ—¶é—´åªæ‰§è¡Œä¸€æ¬¡ï¼Œè€Œå‡½æ•°èŠ‚æµæ˜¯æ¯åˆ°æŒ‡å®šé—´éš”æ—¶é—´æ‰§è¡Œä¸€æ¬¡ã€‚</li>\n<li>å‡½æ•°é˜²æŠ–æ˜¯å°†å‡ æ¬¡æ“ä½œåˆå¹¶ä¸ºä¸€æ¬¡æ“ä½œè¿›è¡Œï¼Œå‡½æ•°èŠ‚æµä½¿å¾—ä¸€å®šæ—¶é—´å†…åªè§¦å‘ä¸€æ¬¡å‡½æ•°ã€‚</li>\n</ul>\n<h3 id=\"2.-å®ç°\">2. å®ç°<a title=\"#2.-å®ç°\" href=\"#2.-å®ç°\"></a></h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span> æ— å¤„ç†è¾“å…¥:<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;non&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span> ç«‹å³é˜²æŠ–å¤„ç†è¾“å…¥:<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;imdebounce&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span> éç«‹å³é˜²æŠ–å¤„ç†è¾“å…¥:<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;unimdebounce&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span> æ•´åˆé˜²æŠ–å¤„ç†è¾“å…¥:<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;bothdebounce&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span> æ—¶é—´æˆ³èŠ‚æµå¤„ç†è¾“å…¥:<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;stampthrottle&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span> å®šæ—¶å™¨èŠ‚æµå¤„ç†è¾“å…¥:<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;timeoutthrottle&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">function</span> <span class=\"title function_\">pri</span>(<span class=\"params\">obj</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(obj.<span class=\"property\">value</span> + <span class=\"string\">&quot; &quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">const</span> non = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.non&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">  non.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;keyup&#x27;</span>, <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"title function_\">pri</span>(e.<span class=\"property\">target</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;)</span></span><br><span class=\"line\"><span class=\"language-javascript\">   ...</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"2.1-èŠ‚æµ\">2.1 èŠ‚æµ<a title=\"#2.1-èŠ‚æµ\" href=\"#2.1-èŠ‚æµ\"></a></h4>\n<blockquote>\n<p>ä½¿å¾—ä¸€å®šæ—¶é—´å†…åªè§¦å‘ä¸€æ¬¡å‡½æ•°ã€‚åŸç†æ˜¯é€šè¿‡åˆ¤æ–­æ˜¯å¦æœ‰å»¶è¿Ÿè°ƒç”¨å‡½æ•°æœªæ‰§è¡Œã€‚</p>\n</blockquote>\n<ul>\n<li><strong>å®šæ—¶å™¨ï¼š</strong> å‡½æ•°è§¦å‘æ˜¯åœ¨æ—¶é—´æ®µå†…ç»“æŸçš„æ—¶å€™</li>\n<li><strong>æ—¶é—´æˆ³ï¼š</strong> å‡½æ•°è§¦å‘æ˜¯åœ¨æ—¶é—´æ®µå†…å¼€å§‹çš„æ—¶å€™</li>\n</ul>\n<h5 id=\"2.1.1-å®šæ—¶å™¨èŠ‚æµ\">2.1.1 å®šæ—¶å™¨èŠ‚æµ<a title=\"#2.1.1-å®šæ—¶å™¨èŠ‚æµ\" href=\"#2.1.1-å®šæ—¶å™¨èŠ‚æµ\"></a></h5>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> timenode = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.timeoutthrottle&#x27;</span>);</span><br><span class=\"line\"> <span class=\"comment\">// å®šæ—¶å™¨</span></span><br><span class=\"line\"> <span class=\"keyword\">function</span> <span class=\"title function_\">timethrottle</span>(<span class=\"params\">func, delay</span>) &#123;</span><br><span class=\"line\">   <span class=\"keyword\">let</span> canrun;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"keyword\">function</span> (<span class=\"params\"><span class=\"variable language_\">arguments</span></span>) &#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (!canrun) &#123;</span><br><span class=\"line\">       canrun = <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">         func.<span class=\"title function_\">call</span>(<span class=\"variable language_\">this</span>, <span class=\"variable language_\">arguments</span>)</span><br><span class=\"line\">         canrun = <span class=\"literal\">null</span>;</span><br><span class=\"line\">       &#125;, delay)</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">const</span> time = <span class=\"title function_\">timethrottle</span>(pri, <span class=\"number\">500</span>);</span><br><span class=\"line\"> timenode.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;keyup&#x27;</span>, <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">   <span class=\"title function_\">time</span>(e.<span class=\"property\">target</span>)</span><br><span class=\"line\"> &#125;)</span><br></pre></td></tr></table></figure>\n<h5 id=\"2.1.2-æ—¶é—´æˆ³èŠ‚æµ\">2.1.2 æ—¶é—´æˆ³èŠ‚æµ<a title=\"#2.1.2-æ—¶é—´æˆ³èŠ‚æµ\" href=\"#2.1.2-æ—¶é—´æˆ³èŠ‚æµ\"></a></h5>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> stampnode = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.stampthrottle&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">// æ—¶é—´æˆ³</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">stampthrottle</span>(<span class=\"params\">func, delay</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> pre = <span class=\"number\">0</span>;    <span class=\"comment\">//ä¸Šä¸€æ¬¡è®°å½•æ—¶é—´</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">function</span> (<span class=\"params\"><span class=\"variable language_\">arguments</span></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> now = <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (now - pre &gt;= delay) &#123;</span><br><span class=\"line\">      func.<span class=\"title function_\">call</span>(<span class=\"variable language_\">this</span>, <span class=\"variable language_\">arguments</span>); <span class=\"comment\">//å½“å‰æ—¶é—´ - ä¸Šæ¬¡æ—¶é—´ &gt; å»¶æ—¶æ—¶é—´</span></span><br><span class=\"line\">      pre = now;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> stamp = <span class=\"title function_\">stampthrottle</span>(pri, <span class=\"number\">500</span>);</span><br><span class=\"line\">stampnode.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;keyup&#x27;</span>, <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">stamp</span>(e.<span class=\"property\">target</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h4 id=\"2.2-é˜²æŠ–\">2.2 é˜²æŠ–<a title=\"#2.2-é˜²æŠ–\" href=\"#2.2-é˜²æŠ–\"></a></h4>\n<blockquote>\n<p>å°†å¤šæ¬¡æ“ä½œåˆå¹¶ä¸ºä¸€æ¬¡æ“ä½œè¿›è¡Œã€‚åŸç†æ˜¯ç»´æŠ¤ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œè§„å®šåœ¨delayæ—¶é—´åè§¦å‘å‡½æ•°ï¼Œä½†æ˜¯åœ¨delayæ—¶é—´å†…å†æ¬¡è§¦å‘çš„è¯ï¼Œå°±ä¼šå–æ¶ˆä¹‹å‰çš„è®¡æ—¶å™¨è€Œé‡æ–°è®¾ç½®ã€‚</p>\n</blockquote>\n<ul>\n<li>\n<p>**éç«‹å³é˜²æŠ–ï¼š**æŒ‡çš„æ˜¯è§¦å‘äº‹ä»¶åå‡½æ•°ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨ n ç§’åæ‰§è¡Œï¼Œå¦‚æœåœ¨ n ç§’å†…åˆè§¦å‘äº†äº‹ä»¶ï¼Œåˆ™ä¼šé‡æ–°è®¡ç®—å‡½æ•°æ‰§è¡Œæ—¶é—´ã€‚</p>\n</li>\n<li>\n<p><strong>ç«‹å³é˜²æŠ–ï¼š</strong> æŒ‡çš„æ˜¯è§¦å‘äº‹ä»¶åå‡½æ•°ä¼šç«‹å³æ‰§è¡Œï¼Œç„¶å n ç§’å†…ä¸è§¦å‘äº‹ä»¶æ‰èƒ½ç»§ç»­æ‰§è¡Œå‡½æ•°çš„æ•ˆæœã€‚</p>\n<p>ç®€è€Œè¨€ä¹‹ï¼Œç«‹å³æ‰§è¡Œç‰ˆå°±æ˜¯ç¬¬ä¸€æ¬¡äº‹ä»¶è§¦å‘åä¼šç«‹å³æ‰§è¡Œï¼Œè‡³å°‘æ‰§è¡Œä¸€æ¬¡äº‹ä»¶ã€‚</p>\n</li>\n</ul>\n<h5 id=\"2.2.1-ç«‹å³é˜²æŠ–\">2.2.1 ç«‹å³é˜²æŠ–<a title=\"#2.2.1-ç«‹å³é˜²æŠ–\" href=\"#2.2.1-ç«‹å³é˜²æŠ–\"></a></h5>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> imnode = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.imdebounce&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">// ç«‹å³é˜²æŠ–</span></span><br><span class=\"line\"><span class=\"comment\">// æŒ‡çš„æ˜¯è§¦å‘äº‹ä»¶åå‡½æ•°ä¼šç«‹å³æ‰§è¡Œï¼Œn ç§’å†…ä¸è§¦å‘äº‹ä»¶æ‰èƒ½ç»§ç»­æ‰§è¡Œå‡½æ•°çš„æ•ˆæœ</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">imdebounce</span>(<span class=\"params\">func, delay</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> timeout;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">function</span> (<span class=\"params\"><span class=\"variable language_\">arguments</span></span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (timeout) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">clearTimeout</span>(timeout);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> flag = !timeout;</span><br><span class=\"line\">    timeout = <span class=\"built_in\">setTimeout</span>(<span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// func.call(this, arguments);</span></span><br><span class=\"line\">      timeout = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;, delay)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (flag) &#123;</span><br><span class=\"line\">      func.<span class=\"title function_\">call</span>(<span class=\"variable language_\">this</span>, <span class=\"variable language_\">arguments</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> im = <span class=\"title function_\">imdebounce</span>(pri, <span class=\"number\">500</span>);</span><br><span class=\"line\">imnode.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;keyup&#x27;</span>, <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ; debugger</span></span><br><span class=\"line\">  <span class=\"comment\">// imdebounce(pri, 500)(e.target)   //å°±ä¸å¯ä»¥ä¸ºä»€ä¹ˆ</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"title function_\">im</span>(e.<span class=\"property\">target</span>);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h5 id=\"2.2.2-éç«‹å³é˜²æŠ–\">2.2.2 éç«‹å³é˜²æŠ–<a title=\"#2.2.2-éç«‹å³é˜²æŠ–\" href=\"#2.2.2-éç«‹å³é˜²æŠ–\"></a></h5>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> unimnode = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.unimdebounce&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">// éç«‹å³é˜²æŠ–</span></span><br><span class=\"line\"><span class=\"comment\">// é«˜é¢‘è§¦å‘æ—¶ å¦‚æœ è§¦å‘å delay æ²¡æœ‰å†è§¦å‘ å°±æ‰§è¡Œå‡½æ•°</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">unimdebounce</span>(<span class=\"params\">func, delay</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> timeout;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">function</span> (<span class=\"params\"><span class=\"variable language_\">arguments</span></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (timeout) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">clearTimeout</span>(timeout);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    timeout = <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      func.<span class=\"title function_\">call</span>(<span class=\"variable language_\">this</span>, <span class=\"variable language_\">arguments</span>);</span><br><span class=\"line\">      timeout = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;, delay)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> un = <span class=\"title function_\">unimdebounce</span>(pri, <span class=\"number\">500</span>);</span><br><span class=\"line\">unimnode.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;keyup&#x27;</span>, <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">un</span>(e.<span class=\"property\">target</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h5 id=\"2.2.3-ç»“åˆç‰ˆ\">2.2.3 ç»“åˆç‰ˆ<a title=\"#2.2.3-ç»“åˆç‰ˆ\" href=\"#2.2.3-ç»“åˆç‰ˆ\"></a></h5>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> bothnode = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;.bothdebounce&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">// ç»“åˆç‰ˆ</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">debounce</span>(<span class=\"params\">func, delay = <span class=\"number\">500</span>, immediate = <span class=\"literal\">true</span></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> timeout;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">function</span> (<span class=\"params\"><span class=\"variable language_\">arguments</span></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (timeout) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">clearTimeout</span>(timeout);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (immediate) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// ç«‹å³æ‰§è¡Œ</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> flag = !timeout;</span><br><span class=\"line\">      timeout = <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        timeout = <span class=\"literal\">null</span>;</span><br><span class=\"line\">      &#125;, delay)</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (flag) &#123;</span><br><span class=\"line\">        func.<span class=\"title function_\">call</span>(<span class=\"variable language_\">this</span>, <span class=\"variable language_\">arguments</span>)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// éç«‹å³æ‰§è¡Œ</span></span><br><span class=\"line\">      timeout = <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        func.<span class=\"title function_\">call</span>(<span class=\"variable language_\">this</span>, <span class=\"variable language_\">arguments</span>);</span><br><span class=\"line\">        timeout = <span class=\"literal\">null</span>;</span><br><span class=\"line\">      &#125;, delay)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> both = <span class=\"title function_\">debounce</span>(pri, <span class=\"number\">500</span>, <span class=\"literal\">false</span>);</span><br><span class=\"line\">bothnode.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;keyup&#x27;</span>, <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">both</span>(e.<span class=\"property\">target</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n","prev":{"title":"æ»šè½®äº‹ä»¶","link":"furtherNotes/further/04 æ»šè½®äº‹ä»¶"},"next":{"title":"HTTP å¸¸è§çŠ¶æ€ç ","link":"furtherNotes/further/02 å¸¸è§çŠ¶æ€ç "},"plink":"https://shylees.github.io/furtherNotes/further/05 èŠ‚æµé˜²æŠ–/","toc":[{"id":"1.-æ¦‚å¿µ","title":"1. æ¦‚å¿µ","index":"1"},{"id":"2.-å®ç°","title":"2. å®ç°","index":"2"}],"copyright":{"custom":"ä¸è®¸è½¬è½½ğŸ˜¡ï¼ï¼ï¼"},"reading_time":"1501 words in 8 min"}